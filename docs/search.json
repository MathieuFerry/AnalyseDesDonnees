[
  {
    "objectID": "CorrectionTD7.html",
    "href": "CorrectionTD7.html",
    "title": "TD7",
    "section": "",
    "text": "Note : ce TD comprend une partie d’exercice sur table corrigée en séance.\nLa base de données est tirée du package ade4 et présente les résultats d’une enquête menée auprès de 810 clients d’une banque. Le dictionnaire des données de la base peut être consulté ici.\n\nlibrary(readr)\nlibrary(FactoMineR)\nlibrary(factoextra)\nlibrary(explor)\nlibrary(GDAtools)\n\nsetwd(\"E:/Enseignements/Cours UVSQ/Année 2023-2024/L3 Sociologie Analyse des données/TD/TD7\")\nenq&lt;-read_csv(\"TD7.csv\")\n\nPour réaliser l’ACM telle qu’indiquée sur l’énoncé, il faut sélectionner les variables présentes dans l’analyse.\n\nenq1&lt;-subset(enq,select=c(csp,age,sexe,\n                          assurvi,cableue,eparliv,interdit,duree,credcon,soldevu,oppo,credhab))\n\nstr(enq1)\n\ntibble [810 × 12] (S3: tbl_df/tbl/data.frame)\n $ csp     : chr [1:810] \"ouvri\" \"cadsu\" \"cadsu\" \"inact\" ...\n $ age     : chr [1:810] \"ai75\" \"ai35\" \"ai75\" \"ai45\" ...\n $ sexe    : chr [1:810] \"hom\" \"hom\" \"hom\" \"fem\" ...\n $ assurvi : chr [1:810] \"non\" \"non\" \"non\" \"non\" ...\n $ cableue : chr [1:810] \"non\" \"non\" \"non\" \"non\" ...\n $ eparliv : chr [1:810] \"nul\" \"nul\" \"nul\" \"nul\" ...\n $ interdit: chr [1:810] \"non\" \"non\" \"non\" \"oui\" ...\n $ duree   : chr [1:810] \"d48\" \"d24\" \"d48\" \"d24\" ...\n $ credcon : chr [1:810] \"nul\" \"nul\" \"nul\" \"nul\" ...\n $ soldevu : chr [1:810] \"n1\" \"n1\" \"p1\" \"p2\" ...\n $ oppo    : chr [1:810] \"non\" \"non\" \"non\" \"non\" ...\n $ credhab : chr [1:810] \"non\" \"non\" \"non\" \"non\" ...\n\n\nIl va falloir indiquer à la fonction MCA le numéro de colonne des variables supplémentaires. Ici, on a créé enq1 de telle sorte qu’elles soient dans les trois premières colonnes, donc on utilise l’argument quali.sup de la fonction MCA, où on indique le vecteur c(1,2,3).\n\nres.acm1&lt;-MCA(enq1,quali.sup=c(1,2,3),graph=F)\n\nOn peut vérifier nos résultats sur les valeurs propres que nous montrions tout à l’heure. Concernant le critère de Kaiser :\n\nres.acm1$eig[,1]&gt;mean(res.acm1$eig[,1])\n\n dim 1  dim 2  dim 3  dim 4  dim 5  dim 6  dim 7  dim 8  dim 9 dim 10 dim 11 \n  TRUE   TRUE   TRUE   TRUE   TRUE   TRUE   TRUE   TRUE  FALSE  FALSE  FALSE \ndim 12 dim 13 dim 14 dim 15 dim 16 dim 17 dim 18 \n FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE \n\n\nConcernant le critère du coude, on projette l’éboulis des valeurs propres.\n\nfviz_eig(res.acm1)\n\n\n\n\nExaminons le nuage des individus sur le premier plan. Le nuage ne semble pas présenter de forme particulière sur le premier plan de l’ACM.\n\nfviz_mca_ind(res.acm1,alpha.ind = \"contrib\",label=\"none\")\n\n\n\n\nOn regarde la projection des modalités actives qui ont une contribution supérieure à la contribution moyenne sur l’axe 1. On a un axe structuré par une opposition entre instabilité et solvabilité bancaire.\n\ncontrib1&lt;-rownames(res.acm1$var$contrib)[res.acm1$var$contrib[,1]&gt;100/nrow(res.acm1$var$contrib)]\nfviz_mca_var(res.acm1,axes=c(1,2),\n             select.var=list(name = contrib1))\n\n\n\n\nLes modalités supplémentaires significativement associées à l’axe peuvent être projetées de la manière suivante :\n\nsigsup1&lt;-rownames(res.acm1$quali.sup$v.test)[abs(res.acm1$quali.sup$v.test[,1])&gt;1.96]\nfviz_mca_var(res.acm1,axes=c(1,2),\n             select.var=list(name = sigsup1))\n\n\n\n\nIl peut être judicieux de représenter les variables actives et supplémentaires sur le même plan. A noter que les variables actives sont beaucoup plus dispersées que les variables supplémentaires, ainsi on n’“explique” pas l’entièreté de la variabilité des pratiques bancaires avec les variables sociodémographiques prises en compte ici.\n\nfviz_mca_var(res.acm1,axes=c(1,2),\n             select.var=list(name = c(sigsup1,contrib1)))\n\n\n\n\nFaisons la même chose pour l’axe 2.\n\ncontrib2&lt;-rownames(res.acm1$var$contrib)[res.acm1$var$contrib[,2]&gt;100/nrow(res.acm1$var$contrib)]\nsigsup2&lt;-rownames(res.acm1$quali.sup$v.test)[abs(res.acm1$quali.sup$v.test[,2])&gt;1.96]\nfviz_mca_var(res.acm1,axes=c(1,2),\n             select.var=list(name = c(sigsup2,contrib2)))\n\n\n\n\nCet axe oppose des emprunteurs (en haut) qui ne sont pas solvable et sont aussi plutôt interdits bancaires, à des épargnants avec beaucoup de réserve financière (et une grande ancienneté dans la banque) en bas. L’axe est surtout structuré par l’âge : on emprunte en début de cycle de vie, tandis qu’on est plus épargnants en fin de cycle de vie.\nOn projette finalement l’ensemble du nuage des variables, en distinguant l’intensité des modalités suivant la qualité de représentation des modalités.\n\nfviz_mca_var(res.acm1,axes=c(1,2),alpha.var = \"cos2\" )\n\n\n\n\nExaminons le taux modifié des premiers axes de l’ACM qui permet de mieux voir l’importance relative du premier axe. Il faut utiliser la fonction modif.rate du package GDAtools. On voit que pour le premier axe il correspond à 78% de l’information, contre 13% pour le second axe. Le premier axe structure donc très fortement les données.\n\nmrate&lt;-modif.rate(res.acm1)\nmrate$modif\n\n             mrate cum.mrate\ndim 1 78.376274789  78.37627\ndim 2 12.906256376  91.28253\ndim 3  4.672854554  95.95539\ndim 4  3.373297051  99.32868\ndim 5  0.481427051  99.81011\ndim 6  0.159532959  99.96964\ndim 7  0.026445496  99.99609\ndim 8  0.003911724 100.00000\n\n\nAppuyons-nous maintenant sur toutes les variables du fichier enq pour réaliser une seconde ACM (21 variables !).\n\nstr(enq)\n\nspc_tbl_ [810 × 21] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ csp     : chr [1:810] \"ouvri\" \"cadsu\" \"cadsu\" \"inact\" ...\n $ duree   : chr [1:810] \"d48\" \"d24\" \"d48\" \"d24\" ...\n $ oppo    : chr [1:810] \"non\" \"non\" \"non\" \"non\" ...\n $ age     : chr [1:810] \"ai75\" \"ai35\" \"ai75\" \"ai45\" ...\n $ sexe    : chr [1:810] \"hom\" \"hom\" \"hom\" \"fem\" ...\n $ interdit: chr [1:810] \"non\" \"non\" \"non\" \"oui\" ...\n $ cableue : chr [1:810] \"non\" \"non\" \"non\" \"non\" ...\n $ assurvi : chr [1:810] \"non\" \"non\" \"non\" \"non\" ...\n $ soldevu : chr [1:810] \"n1\" \"n1\" \"p1\" \"p2\" ...\n $ eparlog : chr [1:810] \"nul\" \"nul\" \"nul\" \"nul\" ...\n $ eparliv : chr [1:810] \"nul\" \"nul\" \"nul\" \"nul\" ...\n $ credhab : chr [1:810] \"non\" \"non\" \"non\" \"non\" ...\n $ credcon : chr [1:810] \"nul\" \"nul\" \"nul\" \"nul\" ...\n $ versesp : chr [1:810] \"non\" \"non\" \"non\" \"oui\" ...\n $ retresp : chr [1:810] \"fai\" \"fai\" \"fai\" \"fai\" ...\n $ remiche : chr [1:810] \"nul\" \"nul\" \"nul\" \"fai\" ...\n $ preltre : chr [1:810] \"nul\" \"nul\" \"nul\" \"nul\" ...\n $ prelfin : chr [1:810] \"nul\" \"nul\" \"nul\" \"nul\" ...\n $ viredeb : chr [1:810] \"nul\" \"nul\" \"nul\" \"nul\" ...\n $ virecre : chr [1:810] \"nul\" \"nul\" \"nul\" \"nul\" ...\n $ porttit : chr [1:810] \"nul\" \"nul\" \"nul\" \"moy\" ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   csp = col_character(),\n  ..   duree = col_character(),\n  ..   oppo = col_character(),\n  ..   age = col_character(),\n  ..   sexe = col_character(),\n  ..   interdit = col_character(),\n  ..   cableue = col_character(),\n  ..   assurvi = col_character(),\n  ..   soldevu = col_character(),\n  ..   eparlog = col_character(),\n  ..   eparliv = col_character(),\n  ..   credhab = col_character(),\n  ..   credcon = col_character(),\n  ..   versesp = col_character(),\n  ..   retresp = col_character(),\n  ..   remiche = col_character(),\n  ..   preltre = col_character(),\n  ..   prelfin = col_character(),\n  ..   viredeb = col_character(),\n  ..   virecre = col_character(),\n  ..   porttit = col_character()\n  .. )\n - attr(*, \"problems\")=&lt;externalptr&gt; \n\n\nCette fois, les variables de position sociale que nous souhaitons positionner en supplémentaire sont en position 1, 4, 5 du fichier enq.\n\nres.acm2&lt;-MCA(enq,quali.sup=c(1,4,5),graph=F)\n\nRegardons de nouveau combien d’axes analyser. D’après le critère du coude, on a plus nettement deux axes à garder ici.\n\nfviz_eig(res.acm2)\n\n\n\n\nLe nuage des individus ne semble pas non plus présenter de structure particulière. Si on pinaillait, on irait regarder la contribution des individus à l’ACM car on a l’impression que certains d’entre eux contribuent bien davantage.\n\nfviz_mca_ind(res.acm2,alpha.ind = \"contrib\",label=\"none\")\n\n\n\n\nLe premier axe, interprétation à discuter :\n\ncontrib1&lt;-rownames(res.acm2$var$contrib)[res.acm2$var$contrib[,1]&gt;100/nrow(res.acm2$var$contrib)]\nsigsup1&lt;-rownames(res.acm2$quali.sup$v.test)[abs(res.acm2$quali.sup$v.test[,1])&gt;1.96]\nfviz_mca_var(res.acm2,axes=c(1,2),\n             select.var=list(name = c(sigsup1,contrib1)))\n\n\n\n\nLe second axe, interprétation à discuter :\n\ncontrib2&lt;-rownames(res.acm2$var$contrib)[res.acm2$var$contrib[,2]&gt;100/nrow(res.acm2$var$contrib)]\nsigsup2&lt;-rownames(res.acm2$quali.sup$v.test)[abs(res.acm2$quali.sup$v.test[,2])&gt;1.96]\nfviz_mca_var(res.acm2,axes=c(1,2),\n             select.var=list(name = c(sigsup2,contrib2)))\n\n\n\n\nL’ensemble des modalités sur le premier plan factoriel, en distinguant l’opacité suivant la qualité de représentation (cos2) :\n\nfviz_mca_var(res.acm2,axes=c(1,2),alpha=\"cos2\")"
  },
  {
    "objectID": "Index.html",
    "href": "Index.html",
    "title": "Cours d’Analyse Des Données",
    "section": "",
    "text": "Cette page recense quelques éléments de corrections des Travaux Dirigés menés dans le cadre du cours d’Analyse Des Données en Licence 3 MIASHS et Sociologie à l’Université Versailles Saint-Quentin.\nLes documents de correction apparaissent ici au fur et à mesure du semestre. Pour toute question, vous pouvez m’envoyer un email !\nCertains des jeux de données utilisés sont tirés de TDs menés par Yoann Demoli et Anatole Lamy envers qui je suis éternellement reconnaissant pour leur générosité !"
  },
  {
    "objectID": "Index.html#analyse-des-données",
    "href": "Index.html#analyse-des-données",
    "title": "Cours d’Analyse Des Données",
    "section": "",
    "text": "Cette page recense quelques éléments de corrections des Travaux Dirigés menés dans le cadre du cours d’Analyse Des Données en Licence 3 MIASHS et Sociologie à l’Université Versailles Saint-Quentin.\nLes documents de correction apparaissent ici au fur et à mesure du semestre. Pour toute question, vous pouvez m’envoyer un email !\nCertains des jeux de données utilisés sont tirés de TDs menés par Yoann Demoli et Anatole Lamy envers qui je suis éternellement reconnaissant pour leur générosité !"
  },
  {
    "objectID": "CorrectionTD5.html",
    "href": "CorrectionTD5.html",
    "title": "TD5",
    "section": "",
    "text": "Les données sont extraites de l’enquête Trajectoires et Origines (2019-2020) s’intéressant en particulier aux immigrés (nommés ici « G1 ») et aux descendants d’immigrés (enfants d’un ou deux immigrés, nommés « G2 ») résidant en France métropolitaine. Les personnes originaires ou descendantes des régions d’Outre-Mer ont également été surreprésentées dans l’échantillon de l’enquête. Enfin, l’enquête a également interrogé des personnes sans ascendance migratoire (« population majoritaire »), la composition de l’échantillon permettant ainsi de comparer le poids des origines par rapport à la population qui n’a pas d’ascendance migratoire sur au moins deux générations.\nDans les données présentées (fichier « tab1.csv »), on a croisé le lien à la migration et l’origine géographique (en lignes) avec la profession, codée suivant la nomenclature des Professions et Catégories Socioprofessionnelles (en colonne).\nOn se pose la question de l’association entre origines migratoires et situation professionnelle :\n\nLes immigrés et leurs descendants, suivant leur origine géographique, ont-ils plus de chances d’appartenir à certaines professions ?\nEn particulier, sont-ils plus souvent en bas de la hiérarchie des professions ou au contraire en haut ?\nQuelles distinctions existe-t-il au sein du monde des professions qui rendent compte de la segmentation du marché du travail suivant l’origine migratoire ?\n\nLe script R « TD5.R » propose quelques lignes de commande permettant de répondre aux questions du TD et vous pouvez également vous appuyer sur les scripts de la séance précédente pour compléter ce travail.\nCeci est un corrigé rapide qui peut être complété de manière plus détaillée en examinant davantage les plans factoriels et en interprétant sociologiquement la segmentation du marché du travail. Il vise simplement à donner quelques pistes d’analyses.\n\n\nAprès avoir ouvert la base (« tab1.csv ») et fait tourner les premières lignes de commande, vous utiliserez les fonctions dim, rownames et colnames permettant de décrire les données. Vous justifierez l’adéquation entre la méthode de l’Analyse Factorielle des Correspondances (AFC) et les données ici étudiées.\n\nlibrary(readr)\nlibrary(tibble)\nlibrary(FactoMineR)\nlibrary(explor)\nlibrary(factoextra)\n\n\nsetwd(\"E:/Enseignements/Cours UVSQ/Année 2023-2024/L3 Sociologie Analyse des données/TD/TD5\")\n\ntab1&lt;-read_csv2(\"tab1.csv\")\ntab1&lt;-column_to_rownames(tab1,var=\"...1\")\n\ndim(tab1)\n\n[1] 30 25\n\nrownames(tab1)\n\n [1] \"Pop majoritaire\"                  \"G1 Outre-Mer\"                    \n [3] \"G2 Outre-Mer\"                     \"G1 Algérie\"                      \n [5] \"G2 Algérie\"                       \"G1 Maroc/Tunisie\"                \n [7] \"G2 Maroc ou de Tunisie\"           \"G1 Afrique sahélienne\"           \n [9] \"G2 Afrique sahélienne\"            \"G1 Afrique guinéenne ou centrale\"\n[11] \"G2 Afrique guinéenne ou centrale\" \"G1 autres pays d'Afrique\"        \n[13] \"G2 autres pays d'Afrique\"         \"G1 Asie du Sud-est\"              \n[15] \"G2 Asie du Sud-est\"               \"G1 Turquie ou du Moyen-Orient\"   \n[17] \"G2 Turquie ou du Moyen-Orient\"    \"G1 Chine\"                        \n[19] \"G1 autres pays d'Asie\"            \"G2 autres pays d'Asie\"           \n[21] \"G1 Portugal\"                      \"G2 Portugal\"                     \n[23] \"G1 Espagne ou d'Italie\"           \"G2 Espagne ou d'Italie\"          \n[25] \"G1 autres pays de l'UE27\"         \"G2 autres pays de l'UE27\"        \n[27] \"G1 autres pays d'Europe\"          \"G2 autres pays d'Europe\"         \n[29] \"G1 autres pays\"                   \"G2 autres pays\"                  \n\ncolnames(tab1)\n\n [1] \"Agriculteurs\"                                \n [2] \"Artisan\"                                     \n [3] \"Commerçant\"                                  \n [4] \"Chefs d’entreprise (&gt;=10 salariés)\"          \n [5] \"Professions libérales\"                       \n [6] \"Cadres fonction publique\"                    \n [7] \"Professions scientifiques\"                   \n [8] \"Professions info/arts/spectacles\"            \n [9] \"Cadres d’entreprise\"                         \n[10] \"Ingénieurs/cadres techniques d’entreprise\"   \n[11] \"Professeurs des écoles\"                      \n[12] \"Prof intermédiaires santé\"                   \n[13] \"Professions intermédiaires fonction publique\"\n[14] \"Prof intermédiaires entreprises\"             \n[15] \"Techniciens\"                                 \n[16] \"Contremaîtres\"                               \n[17] \"Employés fonction publique\"                  \n[18] \"Policiers et militaires\"                     \n[19] \"Employés d’entreprise\"                       \n[20] \"Employés de commerce\"                        \n[21] \"Personnels aux particuliers\"                 \n[22] \"Ouvriers qualif\"                             \n[23] \"Chauffeurs\"                                  \n[24] \"Ouvriers non qualif\"                         \n[25] \"Ouvriers agricoles\"                          \n\n\nLe fichier tab1 correspond à un tableau de contingence croisant en ligne le lien à la migration (immigré G1, descendant d’immigré G2 et population majoritaire avec l’origine migratoire) avec 30 modalités différentes et en colonnes les PCS avec 25 modalités différentes. Dans les cellules se trouvent les effectifs d’individus.\nCe tableau de contingence, de taille importante, est difficilement analysable facilement par le recours à des pourcentages en ligne / colonne, ou même par des représentations de type diagrammes en bâtons.\nEn revanche, il se prête bien à une analyse factorielle des correspondances (voir cours magistral pour plus de détail).\n\n\n\nRéalisez l’AFC.\nAvant toute chose, on peut déjà regarder s’il y a un lien entre l’origine migratoire et la position sur le marché du travail. On peut conduire un test statistique du chi-2 d’indépendance. Dans ce test, l’hypothèse H0 est que les deux variables sont indépendantes et l’hypothèse alternative (H1) est que les deux variables sont liées. Si la p-value associée au test statistique est faible (&lt;0.05), alors on rejette H0 et donc on rejette l’hypothèse d’indépendance entre les deux variables. Pour plus de détails sur ce test, on peut regarder cette vidéo : https://www.youtube.com/watch?v=-Xn1nmHjnHU.\n\nchisq.test(tab1)\n\nWarning in chisq.test(tab1): L’approximation du Chi-2 est peut-être incorrecte\n\n\n\n    Pearson's Chi-squared test\n\ndata:  tab1\nX-squared = 1746.6, df = 696, p-value &lt; 2.2e-16\n\n\nIci, on voit que la statistique du khi-deux est de 1747, avec 696 degrés de liberté, R nous indique que la probabilité associée que sous l’hypothèse d’indépendance on obtienne cette statistique est extrêmement faible. Donc, on rejette l’hypothèse d’indépendance, et on peut conclure qu’il y a un lien statistique entre nos deux variables étudiées.\nNote : la conduite du test renvoie un “Warning” : R nous prévient que le calcul du test n’est pas optimal car normalement on ne calcule pas la statistique du khi-deux quand il y a des cellules vides, mais nous ignorons ce potentiel problème ici.\nQuelle est l’intensité de ce lien ? On peut l’étudier grâce au V de Cramer (voir le cours magistral !). C’est la racine carrée du chi2 divisée par divisée par le nombre minimum entre les colonnes et les lignes moins 1.\n\nsqrt(1746.6/(sum(tab1)*min(nrow(tab1)-1,ncol(tab1)-1)))\n\n[1] 0.05372636\n\n\nOn peut aussi directement utiliser la fonction cramer.v qui est dans le package questionr :\n\ninstall.packages(\"questionr\", repos = \"http://cran.us.r-project.org\")\nlibrary(questionr)\ncramer.v(tab1)\n\n[1] 0.05372675\n\n\nOn a bien le même résultat V-Cramer = 0.05. Au maximum il peut être de 1, au minimum il est de 0. Comme il est &lt;0.2, on peut dire que la liaison ici est plutôt faible même si elle existe.\nOn réalise l’AFC :\n\nres.afc&lt;-CA(tab1, graph=F)\n\nLes résultats sont stockés dans l’objet res.afc qu’on va exploiter à présent.\nEn examinant les données, peut-on dire qu’il y a des associations exclusives ici qui ressortent sur l’un des axes ?\nS’il y avait une partition exclusive des lignes et des colonnes en deux classes (dans le tableau, il y aurait beaucoup de 0 pour certaines cellules), la première valeur propre serait de 1 (ou proche).\n\nres.afc$eig[1,]\n\n                       eigenvalue            percentage of variance \n                       0.02418766                       34.91416148 \ncumulative percentage of variance \n                      34.91416148 \n\n\nIci, la première valeur propre est égale à 0.02, donc il n’y a pas de partition exclusive dans les données qui ressort dans l’AFC.\nCombien d’axes peut-on interpréter dans cette analyse ? Vous comparerez le critère du coude à la règle de Kaiser.\nPour le critère de Kaiser, on regarde les valeurs propres qui ont une valeur supérieure à la valeur propre moyenne :\n\nvp&lt;-res.afc$eig\n# On regarde lesquelles sont supérieures à l'inertie moyenne\nvp[,1]&gt;mean(vp[,1])\n\n dim 1  dim 2  dim 3  dim 4  dim 5  dim 6  dim 7  dim 8  dim 9 dim 10 dim 11 \n  TRUE   TRUE   TRUE   TRUE   TRUE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE \ndim 12 dim 13 dim 14 dim 15 dim 16 dim 17 dim 18 dim 19 dim 20 dim 21 dim 22 \n FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE \ndim 23 dim 24 \n FALSE  FALSE \n\n\nCela nous pousserait à examiner 5 axes.\nPour le critère du coude, on peut regarder l’histogramme des valeurs propres :\n\n##Le scree plot des valeurs propres\nfviz_eig(res.afc,addlabels=T,ncp =24)\n\n\n\n\nOn a un premier décrochage entre la première et seconde dimension de l’AFC : la première est prépondérante. Ensuite un décrochage entre la troisième et quatrième : il semble que trois axes aient une valeur propre importante. Par facilité, on va ici se concentrer sur ces trois premiers axes.\n\nsum(vp[1:3,2])\n\n[1] 66.34759\n\nsum(vp[1:4,2])\n\n[1] 74.22648\n\n\nCes trois premiers axes synthétisent les deux tiers des associations entre l’origine migratoire et la position sur le marché du travail, ce qui semble vraiment pas mal ! Si on poussait jusqu’à 4 axes, on synthétiserait les trois-quarts des associations. On regarde les trois premiers, et on verra si le quatrième est interprétable… Ensuite, l’information est plus négligeable.\n\n\n\nAprès avoir déterminé le nombre d’axes à interpréter, vous les interpréterez.\n\n##Regarder les profils lignes et les profils colonnes qui contribuent le plus à l'axe 1\n#On n'affiche que les 10 premiers pour plus de lisibilité\nfviz_contrib(res.afc,choice=\"row\",axes =1,top=10)\n\n\n\nfviz_contrib(res.afc,choice=\"col\",axes =1,top=10)\n\n\n\n\n\n##Visualiser la contribution des lignes et colonnes qui ont une contribution supérieure à la contribution moyenne sur l'axe 1. \nrowcontrib1&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,1]&gt;100/nrow(tab1)]\ncolcontrib1&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,1]&gt;100/ncol(tab1)]\nfviz_ca_biplot(res.afc,axes=c(1,2),\n               select.row = list(name = rowcontrib1),\n               select.col=list(name=colcontrib1))\n\n\n\n\nL’axe 1 (35 % de l’inertie totale) recouvre principalement à gauche les ouvriers (qualifiés et non qualifiés) et les personnels aux particuliers ainsi que les immigrés du Portugal, du Maghreb et d’Afrique. Ces profils s’opposent à droite aux professions intermédiaires et aux professeurs des écoles qui sont associés à la population majoritaire. Cet axe dénote la position subalterne des immigrés de quasiment toutes les origines (mais pas européennes à part pour les Portugais), qu’on retrouve davantage dans les emplois du bas de la hiérarchie sociale, par rapport à la population majoritaire qui ont une position plus élevée dans la hiérarchie sociale (cela étant, notons que la population majoritaire n’est pas particulièrement associée ici aux positions les plus élevées dans la hiérarchie des PCS, notamment les cadres).\n\n##Regarder les profils lignes et les profils colonnes qui contribuent le plus à l'axe 2\n#On n'affiche que les 10 premiers pour plus de lisibilité\nfviz_contrib(res.afc,choice=\"row\",axes =2,top=10)\n\n\n\nfviz_contrib(res.afc,choice=\"col\",axes =2,top=10)\n\n\n\n##Visualiser la contribution des lignes et colonnes qui ont une contribution supérieure à la contribution moyenne sur l'axe 2. \nrowcontrib2&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,2]&gt;100/nrow(tab1)]\ncolcontrib2&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,2]&gt;100/ncol(tab1)]\nfviz_ca_biplot(res.afc,axes=c(1,2),\n               select.row = list(name = rowcontrib2),\n               select.col=list(name=colcontrib2))\n\n\n\n\nL’axe 2 (vertical) oppose en haut les ouvriers qualifiés, contremaitres, et agriculteurs, associées à la population majoritaire, par rapport à en bas les employés d’entreprise, de commerce et cadres d’entreprises associés aux immigrés des autres pays (européens notamment) et aux descendants d’immigrés de plusieurs origines. Ici, le bas de la hiérarchie sociale semble plutôt associé à la population majoritaire : il ne faut en effet pas oublier que sans ascendance migratoire, on peut aussi être dans les catégories socioprofessionnelles les plus basses, tandis que les immigrés (non racialisés ?) et les enfants d’immigrés ont tendance à avoir en moyenne une position plus typiquement associés à une position un peu plus élevée dans la hiérarchie sociale, mais dans le pôle “privé” : on ne retrouve en effet pas d’employés du public en bas de l’axe. On peut se demander dans quelle mesure cet axe ne recouvre pas une opposition entre les populations rurales (en haut) et urbaines (en bas).\n\n##Regarder les profils lignes et les profils colonnes qui contribuent le plus à l'axe 3\n#On n'affiche que les 10 premiers pour plus de lisibilité\nfviz_contrib(res.afc,choice=\"row\",axes =3,top=10)\n\n\n\nfviz_contrib(res.afc,choice=\"col\",axes =3,top=10)\n\n\n\n##Visualiser la contribution des lignes et colonnes qui ont une contribution supérieure à la contribution moyenne sur l'axe 3 \nrowcontrib3&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,3]&gt;100/nrow(tab1)]\ncolcontrib3&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,3]&gt;100/ncol(tab1)]\nfviz_ca_biplot(res.afc,axes=c(1,3),\n               select.row = list(name = rowcontrib3),\n               select.col=list(name=colcontrib3))\n\n\n\n\nL’axe 3 toujours représenté de manière verticale dénote ici une particularité du marché du travail en bas pour les immigrés d’Afrique guinéenne/centrale, les ultra-marins et leurs descendants, et les descendants d’immigrés algériens et d’Afrique sahélienne qui ont des positions d’emploi spécifiquement associés à la “petite fonction publique” ou à la fonction publique policière.\nOn laisse de côté les autres axes (axe 4 : spécificité des immigrés d’autres pays dans les emplois d’ingénieurs =&gt; immigration du “brain drain” possiblement).\nL’AFC conduit donc à identifier des spécificités de la position des immigrés et des descendants d’immigrés sur le marché du travail par rapport à la population majoritaire : position plus subalterne pour les immigrés, davantage dans le pôle privé (urbain ?) pour les descendants et dans la petite fonction publique ou policière pour les “racisés”. Notons qu’on ne retrouve pas forcément de proximité entre immigrés et descendants d’une même origine : il semble qu’il y ait des effets liés à l’immigration de la position sur le marché du travail, mais pas forcément de “niche” identifiée où une même origine (immigrés comme descendants) seraient cantonnés à un segment particulier du marché du travail (on peut nuancer cette remarque par rapport à l’axe 3 en ne regardant pas seulement les profils-lignes les plus contributeurs, par exemple avec la fonction explor).\nBien sur, cette analyse est ici conduite rapidement et on pourrait creuser l’analyse de manière plus attentive !\n\n\n\nA votre avis, pourquoi les profils-lignes sont-ils plus éloignés de l’origine par rapport aux profils-colonnes ? Piste : vous conduirez la même AFC en mettant en ligne supplémentaire le profil-ligne de la « population majoritaire ».\nCette question appelle plusieurs observations :\n\nLes profils-lignes correspondent à l’origine migratoire et la modalité de la population majoritaire est souvent plus proche du centre des axes par rapport aux immigrés et descendants d’immigrés qui sont davantage éclatés sur les axes.\nNumériquement, la population majoritaire est bien plus importante que celle des immigrés et des descendants : on peut le calculer avec les lignes de code ci-dessous, cette population correspond aux trois-quarts de la population.\nLa centralité de la population majoritaire et la dispersion des autres groupes est donc en fait avant tout le résultat de cette configuration démographique !\nEgalement, la population majoritaire est représentée dans à peu près tous les groupes de PCS : ce n’est pas le cas des immigrés et des descendants qui numériquement plus faibles ressortent dans des segments spécifiques du marché du travail.\n\n\nmytable&lt;-as.table(as.matrix(tab1))\n\n\ndata.frame(round(prop.table(margin.table(mytable, 1))*100,1)) # A frequencies (summed over B)\n\n                               Var1 Freq\n1                   Pop majoritaire 74.3\n2                      G1 Outre-Mer  1.1\n3                      G2 Outre-Mer  1.2\n4                        G1 Algérie  1.7\n5                        G2 Algérie  2.1\n6                  G1 Maroc/Tunisie  2.2\n7            G2 Maroc ou de Tunisie  2.0\n8             G1 Afrique sahélienne  0.7\n9             G2 Afrique sahélienne  0.4\n10 G1 Afrique guinéenne ou centrale  1.1\n11 G2 Afrique guinéenne ou centrale  0.3\n12         G1 autres pays d'Afrique  0.6\n13         G2 autres pays d'Afrique  0.3\n14               G1 Asie du Sud-est  0.3\n15               G2 Asie du Sud-est  0.4\n16    G1 Turquie ou du Moyen-Orient  0.8\n17    G2 Turquie ou du Moyen-Orient  0.4\n18                         G1 Chine  0.3\n19            G1 autres pays d'Asie  0.6\n20            G2 autres pays d'Asie  0.1\n21                      G1 Portugal  1.0\n22                      G2 Portugal  1.7\n23           G1 Espagne ou d'Italie  0.5\n24           G2 Espagne ou d'Italie  2.1\n25         G1 autres pays de l'UE27  1.1\n26         G2 autres pays de l'UE27  0.8\n27          G1 autres pays d'Europe  1.0\n28          G2 autres pays d'Europe  0.2\n29                   G1 autres pays  0.6\n30                   G2 autres pays  0.1\n\ndata.frame(round(prop.table(margin.table(mytable, 2))*100,1))  # B frequencies (summed over A)\n\n                                           Var1 Freq\n1                                  Agriculteurs  1.0\n2                                       Artisan  2.6\n3                                    Commerçant  2.3\n4            Chefs d’entreprise (&gt;=10 salariés)  0.6\n5                         Professions libérales  1.9\n6                      Cadres fonction publique  2.0\n7                     Professions scientifiques  1.7\n8              Professions info/arts/spectacles  1.2\n9                           Cadres d’entreprise  4.7\n10    Ingénieurs/cadres techniques d’entreprise  5.6\n11                       Professeurs des écoles  4.1\n12                    Prof intermédiaires santé  5.5\n13 Professions intermédiaires fonction publique  1.6\n14              Prof intermédiaires entreprises  7.9\n15                                  Techniciens  4.6\n16                                Contremaîtres  2.9\n17                   Employés fonction publique  8.3\n18                      Policiers et militaires  2.0\n19                        Employés d’entreprise  5.0\n20                         Employés de commerce  5.0\n21                  Personnels aux particuliers  7.4\n22                              Ouvriers qualif 11.3\n23                                   Chauffeurs  2.9\n24                          Ouvriers non qualif  7.1\n25                           Ouvriers agricoles  1.0\n\n\nOn peut creuser cette analyse en retirant la population majoritaire de l’analyse, par exemple en mettant ce profil-ligne en supplémentaire. En ce cas, on étudie la segmentation du marché du travail en regardant les immigrés et les descendants les uns par rapport aux autres et non par rapport à la population majoritaire.\n\nres.afc2&lt;-CA(tab1,row.sup=1,graph=F)\n\nrowcontrib1&lt;-rownames(res.afc2$row$contrib)[res.afc2$row$contrib[,1]&gt;100/nrow(tab1)]\ncolcontrib1&lt;-rownames(res.afc2$col$contrib)[res.afc2$col$contrib[,1]&gt;100/ncol(tab1)]\nfviz_ca_biplot(res.afc2,axes=c(1,2),\n               select.row = list(name = rowcontrib1),\n               select.col=list(name=colcontrib1))\n\n\n\nrowcontrib2&lt;-rownames(res.afc2$row$contrib)[res.afc2$row$contrib[,2]&gt;100/nrow(tab1)]\ncolcontrib2&lt;-rownames(res.afc2$col$contrib)[res.afc2$col$contrib[,2]&gt;100/ncol(tab1)]\nfviz_ca_biplot(res.afc2,axes=c(1,2),\n               select.row = list(name = rowcontrib2),\n               select.col=list(name=colcontrib2))\n\n\n\n\n\n\n\nOuvrez le fichier « tab2.csv ». Ce fichier contient des profils-colonnes supplémentaires renseignant le niveau de diplôme des profils-lignes. Vous conduirez une AFC où ces colonnes sont mises en « profils-lignes supplémentaires ». L’une des dimensions de segmentation du marché du travail suivant le lien à la migration est-elle associée au niveau de diplôme ?  \nLes colonnes supplémentaires sont entre les positions 26 et 33, ce qu’il faut indiquer dans la fonction CA.\nNote : ici, on inclut la population majoritaire comme profil-ligne actif.\nAvec la fonction fviz_ca_col, on voit bien que le premier axe oppose très clairement les non-diplômés aux autres. Sur le deuxième et troisième axe, le diplôme est moins structurant mais les plus diplômés ressortent quand même (en bas sur le 2e et en haut sur le 3e).\n\n###Intégrer des colonnes supplémentaires à l'analyse\nsetwd(\"E:/Enseignements/Cours UVSQ/Année 2023-2024/L3 Sociologie Analyse des données/TD/TD5\")\n\ntab2&lt;-read_csv2(\"tab2.csv\")\n\nℹ Using \"','\" as decimal and \"'.'\" as grouping mark. Use `read_delim()` for more control.\n\n\nNew names:\nRows: 30 Columns: 34\n── Column specification\n──────────────────────────────────────────────────────── Delimiter: \";\" chr\n(1): ...1 dbl (33): Agriculteurs, Artisan, Commerçant, Chefs d’entreprise (&gt;=10\nsalari...\nℹ Use `spec()` to retrieve the full column specification for this data. ℹ\nSpecify the column types or set `show_col_types = FALSE` to quiet this message.\n• `` -&gt; `...1`\n\ntab2&lt;-column_to_rownames(tab2,var=\"...1\")\n\nrownames(tab2)\n\n [1] \"Pop majoritaire\"                  \"G1 Outre-Mer\"                    \n [3] \"G2 Outre-Mer\"                     \"G1 Algérie\"                      \n [5] \"G2 Algérie\"                       \"G1 Maroc/Tunisie\"                \n [7] \"G2 Maroc ou de Tunisie\"           \"G1 Afrique sahélienne\"           \n [9] \"G2 Afrique sahélienne\"            \"G1 Afrique guinéenne ou centrale\"\n[11] \"G2 Afrique guinéenne ou centrale\" \"G1 autres pays d'Afrique\"        \n[13] \"G2 autres pays d'Afrique\"         \"G1 Asie du Sud-est\"              \n[15] \"G2 Asie du Sud-est\"               \"G1 Turquie ou du Moyen-Orient\"   \n[17] \"G2 Turquie ou du Moyen-Orient\"    \"G1 Chine\"                        \n[19] \"G1 autres pays d'Asie\"            \"G2 autres pays d'Asie\"           \n[21] \"G1 Portugal\"                      \"G2 Portugal\"                     \n[23] \"G1 Espagne ou d'Italie\"           \"G2 Espagne ou d'Italie\"          \n[25] \"G1 autres pays de l'UE27\"         \"G2 autres pays de l'UE27\"        \n[27] \"G1 autres pays d'Europe\"          \"G2 autres pays d'Europe\"         \n[29] \"G1 autres pays\"                   \"G2 autres pays\"                  \n\ncolnames(tab2)\n\n [1] \"Agriculteurs\"                                \n [2] \"Artisan\"                                     \n [3] \"Commerçant\"                                  \n [4] \"Chefs d’entreprise (&gt;=10 salariés)\"          \n [5] \"Professions libérales\"                       \n [6] \"Cadres fonction publique\"                    \n [7] \"Professions scientifiques\"                   \n [8] \"Professions info/arts/spectacles\"            \n [9] \"Cadres d’entreprise\"                         \n[10] \"Ingénieurs/cadres techniques d’entreprise\"   \n[11] \"Professeurs des écoles\"                      \n[12] \"Prof intermédiaires santé\"                   \n[13] \"Professions intermédiaires fonction publique\"\n[14] \"Prof intermédiaires entreprises\"             \n[15] \"Techniciens\"                                 \n[16] \"Contremaîtres\"                               \n[17] \"Employés fonction publique\"                  \n[18] \"Policiers et militaires\"                     \n[19] \"Employés d’entreprise\"                       \n[20] \"Employés de commerce\"                        \n[21] \"Personnels aux particuliers\"                 \n[22] \"Ouvriers qualif\"                             \n[23] \"Chauffeurs\"                                  \n[24] \"Ouvriers non qualif\"                         \n[25] \"Ouvriers agricoles\"                          \n[26] \"Aucun diplôme\"                               \n[27] \"CEP\"                                         \n[28] \"Brevet collège\"                              \n[29] \"CAP,BEP\"                                     \n[30] \"Bac techno/pro\"                              \n[31] \"Bac général\"                                 \n[32] \"Bac+1/+2\"                                    \n[33] \"Bac&gt;=+3\"                                     \n\nres.afc3&lt;-CA(tab2,col.sup=26:33,graph=F)\n\nfviz_ca_col(res.afc3,axes=c(1,2),label=\"col.sup\")\n\n\n\nfviz_ca_col(res.afc3,axes=c(1,3),label=\"col.sup\")"
  },
  {
    "objectID": "CorrectionTD5.html#question-1",
    "href": "CorrectionTD5.html#question-1",
    "title": "TD5",
    "section": "",
    "text": "Après avoir ouvert la base (« tab1.csv ») et fait tourner les premières lignes de commande, vous utiliserez les fonctions dim, rownames et colnames permettant de décrire les données. Vous justifierez l’adéquation entre la méthode de l’Analyse Factorielle des Correspondances (AFC) et les données ici étudiées.\n\nlibrary(readr)\nlibrary(tibble)\nlibrary(FactoMineR)\nlibrary(explor)\nlibrary(factoextra)\n\n\nsetwd(\"E:/Enseignements/Cours UVSQ/Année 2023-2024/L3 Sociologie Analyse des données/TD/TD5\")\n\ntab1&lt;-read_csv2(\"tab1.csv\")\ntab1&lt;-column_to_rownames(tab1,var=\"...1\")\n\ndim(tab1)\n\n[1] 30 25\n\nrownames(tab1)\n\n [1] \"Pop majoritaire\"                  \"G1 Outre-Mer\"                    \n [3] \"G2 Outre-Mer\"                     \"G1 Algérie\"                      \n [5] \"G2 Algérie\"                       \"G1 Maroc/Tunisie\"                \n [7] \"G2 Maroc ou de Tunisie\"           \"G1 Afrique sahélienne\"           \n [9] \"G2 Afrique sahélienne\"            \"G1 Afrique guinéenne ou centrale\"\n[11] \"G2 Afrique guinéenne ou centrale\" \"G1 autres pays d'Afrique\"        \n[13] \"G2 autres pays d'Afrique\"         \"G1 Asie du Sud-est\"              \n[15] \"G2 Asie du Sud-est\"               \"G1 Turquie ou du Moyen-Orient\"   \n[17] \"G2 Turquie ou du Moyen-Orient\"    \"G1 Chine\"                        \n[19] \"G1 autres pays d'Asie\"            \"G2 autres pays d'Asie\"           \n[21] \"G1 Portugal\"                      \"G2 Portugal\"                     \n[23] \"G1 Espagne ou d'Italie\"           \"G2 Espagne ou d'Italie\"          \n[25] \"G1 autres pays de l'UE27\"         \"G2 autres pays de l'UE27\"        \n[27] \"G1 autres pays d'Europe\"          \"G2 autres pays d'Europe\"         \n[29] \"G1 autres pays\"                   \"G2 autres pays\"                  \n\ncolnames(tab1)\n\n [1] \"Agriculteurs\"                                \n [2] \"Artisan\"                                     \n [3] \"Commerçant\"                                  \n [4] \"Chefs d’entreprise (&gt;=10 salariés)\"          \n [5] \"Professions libérales\"                       \n [6] \"Cadres fonction publique\"                    \n [7] \"Professions scientifiques\"                   \n [8] \"Professions info/arts/spectacles\"            \n [9] \"Cadres d’entreprise\"                         \n[10] \"Ingénieurs/cadres techniques d’entreprise\"   \n[11] \"Professeurs des écoles\"                      \n[12] \"Prof intermédiaires santé\"                   \n[13] \"Professions intermédiaires fonction publique\"\n[14] \"Prof intermédiaires entreprises\"             \n[15] \"Techniciens\"                                 \n[16] \"Contremaîtres\"                               \n[17] \"Employés fonction publique\"                  \n[18] \"Policiers et militaires\"                     \n[19] \"Employés d’entreprise\"                       \n[20] \"Employés de commerce\"                        \n[21] \"Personnels aux particuliers\"                 \n[22] \"Ouvriers qualif\"                             \n[23] \"Chauffeurs\"                                  \n[24] \"Ouvriers non qualif\"                         \n[25] \"Ouvriers agricoles\"                          \n\n\nLe fichier tab1 correspond à un tableau de contingence croisant en ligne le lien à la migration (immigré G1, descendant d’immigré G2 et population majoritaire avec l’origine migratoire) avec 30 modalités différentes et en colonnes les PCS avec 25 modalités différentes. Dans les cellules se trouvent les effectifs d’individus.\nCe tableau de contingence, de taille importante, est difficilement analysable facilement par le recours à des pourcentages en ligne / colonne, ou même par des représentations de type diagrammes en bâtons.\nEn revanche, il se prête bien à une analyse factorielle des correspondances (voir cours magistral pour plus de détail)."
  },
  {
    "objectID": "CorrectionTD5.html#question-2",
    "href": "CorrectionTD5.html#question-2",
    "title": "TD5",
    "section": "",
    "text": "Réalisez l’AFC.\nAvant toute chose, on peut déjà regarder s’il y a un lien entre l’origine migratoire et la position sur le marché du travail. On peut conduire un test statistique du chi-2 d’indépendance. Dans ce test, l’hypothèse H0 est que les deux variables sont indépendantes et l’hypothèse alternative (H1) est que les deux variables sont liées. Si la p-value associée au test statistique est faible (&lt;0.05), alors on rejette H0 et donc on rejette l’hypothèse d’indépendance entre les deux variables. Pour plus de détails sur ce test, on peut regarder cette vidéo : https://www.youtube.com/watch?v=-Xn1nmHjnHU.\n\nchisq.test(tab1)\n\nWarning in chisq.test(tab1): L’approximation du Chi-2 est peut-être incorrecte\n\n\n\n    Pearson's Chi-squared test\n\ndata:  tab1\nX-squared = 1746.6, df = 696, p-value &lt; 2.2e-16\n\n\nIci, on voit que la statistique du khi-deux est de 1747, avec 696 degrés de liberté, R nous indique que la probabilité associée que sous l’hypothèse d’indépendance on obtienne cette statistique est extrêmement faible. Donc, on rejette l’hypothèse d’indépendance, et on peut conclure qu’il y a un lien statistique entre nos deux variables étudiées.\nNote : la conduite du test renvoie un “Warning” : R nous prévient que le calcul du test n’est pas optimal car normalement on ne calcule pas la statistique du khi-deux quand il y a des cellules vides, mais nous ignorons ce potentiel problème ici.\nQuelle est l’intensité de ce lien ? On peut l’étudier grâce au V de Cramer (voir le cours magistral !). C’est la racine carrée du chi2 divisée par divisée par le nombre minimum entre les colonnes et les lignes moins 1.\n\nsqrt(1746.6/(sum(tab1)*min(nrow(tab1)-1,ncol(tab1)-1)))\n\n[1] 0.05372636\n\n\nOn peut aussi directement utiliser la fonction cramer.v qui est dans le package questionr :\n\ninstall.packages(\"questionr\", repos = \"http://cran.us.r-project.org\")\nlibrary(questionr)\ncramer.v(tab1)\n\n[1] 0.05372675\n\n\nOn a bien le même résultat V-Cramer = 0.05. Au maximum il peut être de 1, au minimum il est de 0. Comme il est &lt;0.2, on peut dire que la liaison ici est plutôt faible même si elle existe.\nOn réalise l’AFC :\n\nres.afc&lt;-CA(tab1, graph=F)\n\nLes résultats sont stockés dans l’objet res.afc qu’on va exploiter à présent.\nEn examinant les données, peut-on dire qu’il y a des associations exclusives ici qui ressortent sur l’un des axes ?\nS’il y avait une partition exclusive des lignes et des colonnes en deux classes (dans le tableau, il y aurait beaucoup de 0 pour certaines cellules), la première valeur propre serait de 1 (ou proche).\n\nres.afc$eig[1,]\n\n                       eigenvalue            percentage of variance \n                       0.02418766                       34.91416148 \ncumulative percentage of variance \n                      34.91416148 \n\n\nIci, la première valeur propre est égale à 0.02, donc il n’y a pas de partition exclusive dans les données qui ressort dans l’AFC.\nCombien d’axes peut-on interpréter dans cette analyse ? Vous comparerez le critère du coude à la règle de Kaiser.\nPour le critère de Kaiser, on regarde les valeurs propres qui ont une valeur supérieure à la valeur propre moyenne :\n\nvp&lt;-res.afc$eig\n# On regarde lesquelles sont supérieures à l'inertie moyenne\nvp[,1]&gt;mean(vp[,1])\n\n dim 1  dim 2  dim 3  dim 4  dim 5  dim 6  dim 7  dim 8  dim 9 dim 10 dim 11 \n  TRUE   TRUE   TRUE   TRUE   TRUE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE \ndim 12 dim 13 dim 14 dim 15 dim 16 dim 17 dim 18 dim 19 dim 20 dim 21 dim 22 \n FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE \ndim 23 dim 24 \n FALSE  FALSE \n\n\nCela nous pousserait à examiner 5 axes.\nPour le critère du coude, on peut regarder l’histogramme des valeurs propres :\n\n##Le scree plot des valeurs propres\nfviz_eig(res.afc,addlabels=T,ncp =24)\n\n\n\n\nOn a un premier décrochage entre la première et seconde dimension de l’AFC : la première est prépondérante. Ensuite un décrochage entre la troisième et quatrième : il semble que trois axes aient une valeur propre importante. Par facilité, on va ici se concentrer sur ces trois premiers axes.\n\nsum(vp[1:3,2])\n\n[1] 66.34759\n\nsum(vp[1:4,2])\n\n[1] 74.22648\n\n\nCes trois premiers axes synthétisent les deux tiers des associations entre l’origine migratoire et la position sur le marché du travail, ce qui semble vraiment pas mal ! Si on poussait jusqu’à 4 axes, on synthétiserait les trois-quarts des associations. On regarde les trois premiers, et on verra si le quatrième est interprétable… Ensuite, l’information est plus négligeable."
  },
  {
    "objectID": "CorrectionTD5.html#question-3",
    "href": "CorrectionTD5.html#question-3",
    "title": "TD5",
    "section": "",
    "text": "Après avoir déterminé le nombre d’axes à interpréter, vous les interpréterez.\n\n##Regarder les profils lignes et les profils colonnes qui contribuent le plus à l'axe 1\n#On n'affiche que les 10 premiers pour plus de lisibilité\nfviz_contrib(res.afc,choice=\"row\",axes =1,top=10)\n\n\n\nfviz_contrib(res.afc,choice=\"col\",axes =1,top=10)\n\n\n\n\n\n##Visualiser la contribution des lignes et colonnes qui ont une contribution supérieure à la contribution moyenne sur l'axe 1. \nrowcontrib1&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,1]&gt;100/nrow(tab1)]\ncolcontrib1&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,1]&gt;100/ncol(tab1)]\nfviz_ca_biplot(res.afc,axes=c(1,2),\n               select.row = list(name = rowcontrib1),\n               select.col=list(name=colcontrib1))\n\n\n\n\nL’axe 1 (35 % de l’inertie totale) recouvre principalement à gauche les ouvriers (qualifiés et non qualifiés) et les personnels aux particuliers ainsi que les immigrés du Portugal, du Maghreb et d’Afrique. Ces profils s’opposent à droite aux professions intermédiaires et aux professeurs des écoles qui sont associés à la population majoritaire. Cet axe dénote la position subalterne des immigrés de quasiment toutes les origines (mais pas européennes à part pour les Portugais), qu’on retrouve davantage dans les emplois du bas de la hiérarchie sociale, par rapport à la population majoritaire qui ont une position plus élevée dans la hiérarchie sociale (cela étant, notons que la population majoritaire n’est pas particulièrement associée ici aux positions les plus élevées dans la hiérarchie des PCS, notamment les cadres).\n\n##Regarder les profils lignes et les profils colonnes qui contribuent le plus à l'axe 2\n#On n'affiche que les 10 premiers pour plus de lisibilité\nfviz_contrib(res.afc,choice=\"row\",axes =2,top=10)\n\n\n\nfviz_contrib(res.afc,choice=\"col\",axes =2,top=10)\n\n\n\n##Visualiser la contribution des lignes et colonnes qui ont une contribution supérieure à la contribution moyenne sur l'axe 2. \nrowcontrib2&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,2]&gt;100/nrow(tab1)]\ncolcontrib2&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,2]&gt;100/ncol(tab1)]\nfviz_ca_biplot(res.afc,axes=c(1,2),\n               select.row = list(name = rowcontrib2),\n               select.col=list(name=colcontrib2))\n\n\n\n\nL’axe 2 (vertical) oppose en haut les ouvriers qualifiés, contremaitres, et agriculteurs, associées à la population majoritaire, par rapport à en bas les employés d’entreprise, de commerce et cadres d’entreprises associés aux immigrés des autres pays (européens notamment) et aux descendants d’immigrés de plusieurs origines. Ici, le bas de la hiérarchie sociale semble plutôt associé à la population majoritaire : il ne faut en effet pas oublier que sans ascendance migratoire, on peut aussi être dans les catégories socioprofessionnelles les plus basses, tandis que les immigrés (non racialisés ?) et les enfants d’immigrés ont tendance à avoir en moyenne une position plus typiquement associés à une position un peu plus élevée dans la hiérarchie sociale, mais dans le pôle “privé” : on ne retrouve en effet pas d’employés du public en bas de l’axe. On peut se demander dans quelle mesure cet axe ne recouvre pas une opposition entre les populations rurales (en haut) et urbaines (en bas).\n\n##Regarder les profils lignes et les profils colonnes qui contribuent le plus à l'axe 3\n#On n'affiche que les 10 premiers pour plus de lisibilité\nfviz_contrib(res.afc,choice=\"row\",axes =3,top=10)\n\n\n\nfviz_contrib(res.afc,choice=\"col\",axes =3,top=10)\n\n\n\n##Visualiser la contribution des lignes et colonnes qui ont une contribution supérieure à la contribution moyenne sur l'axe 3 \nrowcontrib3&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,3]&gt;100/nrow(tab1)]\ncolcontrib3&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,3]&gt;100/ncol(tab1)]\nfviz_ca_biplot(res.afc,axes=c(1,3),\n               select.row = list(name = rowcontrib3),\n               select.col=list(name=colcontrib3))\n\n\n\n\nL’axe 3 toujours représenté de manière verticale dénote ici une particularité du marché du travail en bas pour les immigrés d’Afrique guinéenne/centrale, les ultra-marins et leurs descendants, et les descendants d’immigrés algériens et d’Afrique sahélienne qui ont des positions d’emploi spécifiquement associés à la “petite fonction publique” ou à la fonction publique policière.\nOn laisse de côté les autres axes (axe 4 : spécificité des immigrés d’autres pays dans les emplois d’ingénieurs =&gt; immigration du “brain drain” possiblement).\nL’AFC conduit donc à identifier des spécificités de la position des immigrés et des descendants d’immigrés sur le marché du travail par rapport à la population majoritaire : position plus subalterne pour les immigrés, davantage dans le pôle privé (urbain ?) pour les descendants et dans la petite fonction publique ou policière pour les “racisés”. Notons qu’on ne retrouve pas forcément de proximité entre immigrés et descendants d’une même origine : il semble qu’il y ait des effets liés à l’immigration de la position sur le marché du travail, mais pas forcément de “niche” identifiée où une même origine (immigrés comme descendants) seraient cantonnés à un segment particulier du marché du travail (on peut nuancer cette remarque par rapport à l’axe 3 en ne regardant pas seulement les profils-lignes les plus contributeurs, par exemple avec la fonction explor).\nBien sur, cette analyse est ici conduite rapidement et on pourrait creuser l’analyse de manière plus attentive !"
  },
  {
    "objectID": "CorrectionTD5.html#question-4",
    "href": "CorrectionTD5.html#question-4",
    "title": "TD5",
    "section": "",
    "text": "A votre avis, pourquoi les profils-lignes sont-ils plus éloignés de l’origine par rapport aux profils-colonnes ? Piste : vous conduirez la même AFC en mettant en ligne supplémentaire le profil-ligne de la « population majoritaire ».\nCette question appelle plusieurs observations :\n\nLes profils-lignes correspondent à l’origine migratoire et la modalité de la population majoritaire est souvent plus proche du centre des axes par rapport aux immigrés et descendants d’immigrés qui sont davantage éclatés sur les axes.\nNumériquement, la population majoritaire est bien plus importante que celle des immigrés et des descendants : on peut le calculer avec les lignes de code ci-dessous, cette population correspond aux trois-quarts de la population.\nLa centralité de la population majoritaire et la dispersion des autres groupes est donc en fait avant tout le résultat de cette configuration démographique !\nEgalement, la population majoritaire est représentée dans à peu près tous les groupes de PCS : ce n’est pas le cas des immigrés et des descendants qui numériquement plus faibles ressortent dans des segments spécifiques du marché du travail.\n\n\nmytable&lt;-as.table(as.matrix(tab1))\n\n\ndata.frame(round(prop.table(margin.table(mytable, 1))*100,1)) # A frequencies (summed over B)\n\n                               Var1 Freq\n1                   Pop majoritaire 74.3\n2                      G1 Outre-Mer  1.1\n3                      G2 Outre-Mer  1.2\n4                        G1 Algérie  1.7\n5                        G2 Algérie  2.1\n6                  G1 Maroc/Tunisie  2.2\n7            G2 Maroc ou de Tunisie  2.0\n8             G1 Afrique sahélienne  0.7\n9             G2 Afrique sahélienne  0.4\n10 G1 Afrique guinéenne ou centrale  1.1\n11 G2 Afrique guinéenne ou centrale  0.3\n12         G1 autres pays d'Afrique  0.6\n13         G2 autres pays d'Afrique  0.3\n14               G1 Asie du Sud-est  0.3\n15               G2 Asie du Sud-est  0.4\n16    G1 Turquie ou du Moyen-Orient  0.8\n17    G2 Turquie ou du Moyen-Orient  0.4\n18                         G1 Chine  0.3\n19            G1 autres pays d'Asie  0.6\n20            G2 autres pays d'Asie  0.1\n21                      G1 Portugal  1.0\n22                      G2 Portugal  1.7\n23           G1 Espagne ou d'Italie  0.5\n24           G2 Espagne ou d'Italie  2.1\n25         G1 autres pays de l'UE27  1.1\n26         G2 autres pays de l'UE27  0.8\n27          G1 autres pays d'Europe  1.0\n28          G2 autres pays d'Europe  0.2\n29                   G1 autres pays  0.6\n30                   G2 autres pays  0.1\n\ndata.frame(round(prop.table(margin.table(mytable, 2))*100,1))  # B frequencies (summed over A)\n\n                                           Var1 Freq\n1                                  Agriculteurs  1.0\n2                                       Artisan  2.6\n3                                    Commerçant  2.3\n4            Chefs d’entreprise (&gt;=10 salariés)  0.6\n5                         Professions libérales  1.9\n6                      Cadres fonction publique  2.0\n7                     Professions scientifiques  1.7\n8              Professions info/arts/spectacles  1.2\n9                           Cadres d’entreprise  4.7\n10    Ingénieurs/cadres techniques d’entreprise  5.6\n11                       Professeurs des écoles  4.1\n12                    Prof intermédiaires santé  5.5\n13 Professions intermédiaires fonction publique  1.6\n14              Prof intermédiaires entreprises  7.9\n15                                  Techniciens  4.6\n16                                Contremaîtres  2.9\n17                   Employés fonction publique  8.3\n18                      Policiers et militaires  2.0\n19                        Employés d’entreprise  5.0\n20                         Employés de commerce  5.0\n21                  Personnels aux particuliers  7.4\n22                              Ouvriers qualif 11.3\n23                                   Chauffeurs  2.9\n24                          Ouvriers non qualif  7.1\n25                           Ouvriers agricoles  1.0\n\n\nOn peut creuser cette analyse en retirant la population majoritaire de l’analyse, par exemple en mettant ce profil-ligne en supplémentaire. En ce cas, on étudie la segmentation du marché du travail en regardant les immigrés et les descendants les uns par rapport aux autres et non par rapport à la population majoritaire.\n\nres.afc2&lt;-CA(tab1,row.sup=1,graph=F)\n\nrowcontrib1&lt;-rownames(res.afc2$row$contrib)[res.afc2$row$contrib[,1]&gt;100/nrow(tab1)]\ncolcontrib1&lt;-rownames(res.afc2$col$contrib)[res.afc2$col$contrib[,1]&gt;100/ncol(tab1)]\nfviz_ca_biplot(res.afc2,axes=c(1,2),\n               select.row = list(name = rowcontrib1),\n               select.col=list(name=colcontrib1))\n\n\n\nrowcontrib2&lt;-rownames(res.afc2$row$contrib)[res.afc2$row$contrib[,2]&gt;100/nrow(tab1)]\ncolcontrib2&lt;-rownames(res.afc2$col$contrib)[res.afc2$col$contrib[,2]&gt;100/ncol(tab1)]\nfviz_ca_biplot(res.afc2,axes=c(1,2),\n               select.row = list(name = rowcontrib2),\n               select.col=list(name=colcontrib2))"
  },
  {
    "objectID": "CorrectionTD5.html#question-5",
    "href": "CorrectionTD5.html#question-5",
    "title": "TD5",
    "section": "",
    "text": "Ouvrez le fichier « tab2.csv ». Ce fichier contient des profils-colonnes supplémentaires renseignant le niveau de diplôme des profils-lignes. Vous conduirez une AFC où ces colonnes sont mises en « profils-lignes supplémentaires ». L’une des dimensions de segmentation du marché du travail suivant le lien à la migration est-elle associée au niveau de diplôme ?  \nLes colonnes supplémentaires sont entre les positions 26 et 33, ce qu’il faut indiquer dans la fonction CA.\nNote : ici, on inclut la population majoritaire comme profil-ligne actif.\nAvec la fonction fviz_ca_col, on voit bien que le premier axe oppose très clairement les non-diplômés aux autres. Sur le deuxième et troisième axe, le diplôme est moins structurant mais les plus diplômés ressortent quand même (en bas sur le 2e et en haut sur le 3e).\n\n###Intégrer des colonnes supplémentaires à l'analyse\nsetwd(\"E:/Enseignements/Cours UVSQ/Année 2023-2024/L3 Sociologie Analyse des données/TD/TD5\")\n\ntab2&lt;-read_csv2(\"tab2.csv\")\n\nℹ Using \"','\" as decimal and \"'.'\" as grouping mark. Use `read_delim()` for more control.\n\n\nNew names:\nRows: 30 Columns: 34\n── Column specification\n──────────────────────────────────────────────────────── Delimiter: \";\" chr\n(1): ...1 dbl (33): Agriculteurs, Artisan, Commerçant, Chefs d’entreprise (&gt;=10\nsalari...\nℹ Use `spec()` to retrieve the full column specification for this data. ℹ\nSpecify the column types or set `show_col_types = FALSE` to quiet this message.\n• `` -&gt; `...1`\n\ntab2&lt;-column_to_rownames(tab2,var=\"...1\")\n\nrownames(tab2)\n\n [1] \"Pop majoritaire\"                  \"G1 Outre-Mer\"                    \n [3] \"G2 Outre-Mer\"                     \"G1 Algérie\"                      \n [5] \"G2 Algérie\"                       \"G1 Maroc/Tunisie\"                \n [7] \"G2 Maroc ou de Tunisie\"           \"G1 Afrique sahélienne\"           \n [9] \"G2 Afrique sahélienne\"            \"G1 Afrique guinéenne ou centrale\"\n[11] \"G2 Afrique guinéenne ou centrale\" \"G1 autres pays d'Afrique\"        \n[13] \"G2 autres pays d'Afrique\"         \"G1 Asie du Sud-est\"              \n[15] \"G2 Asie du Sud-est\"               \"G1 Turquie ou du Moyen-Orient\"   \n[17] \"G2 Turquie ou du Moyen-Orient\"    \"G1 Chine\"                        \n[19] \"G1 autres pays d'Asie\"            \"G2 autres pays d'Asie\"           \n[21] \"G1 Portugal\"                      \"G2 Portugal\"                     \n[23] \"G1 Espagne ou d'Italie\"           \"G2 Espagne ou d'Italie\"          \n[25] \"G1 autres pays de l'UE27\"         \"G2 autres pays de l'UE27\"        \n[27] \"G1 autres pays d'Europe\"          \"G2 autres pays d'Europe\"         \n[29] \"G1 autres pays\"                   \"G2 autres pays\"                  \n\ncolnames(tab2)\n\n [1] \"Agriculteurs\"                                \n [2] \"Artisan\"                                     \n [3] \"Commerçant\"                                  \n [4] \"Chefs d’entreprise (&gt;=10 salariés)\"          \n [5] \"Professions libérales\"                       \n [6] \"Cadres fonction publique\"                    \n [7] \"Professions scientifiques\"                   \n [8] \"Professions info/arts/spectacles\"            \n [9] \"Cadres d’entreprise\"                         \n[10] \"Ingénieurs/cadres techniques d’entreprise\"   \n[11] \"Professeurs des écoles\"                      \n[12] \"Prof intermédiaires santé\"                   \n[13] \"Professions intermédiaires fonction publique\"\n[14] \"Prof intermédiaires entreprises\"             \n[15] \"Techniciens\"                                 \n[16] \"Contremaîtres\"                               \n[17] \"Employés fonction publique\"                  \n[18] \"Policiers et militaires\"                     \n[19] \"Employés d’entreprise\"                       \n[20] \"Employés de commerce\"                        \n[21] \"Personnels aux particuliers\"                 \n[22] \"Ouvriers qualif\"                             \n[23] \"Chauffeurs\"                                  \n[24] \"Ouvriers non qualif\"                         \n[25] \"Ouvriers agricoles\"                          \n[26] \"Aucun diplôme\"                               \n[27] \"CEP\"                                         \n[28] \"Brevet collège\"                              \n[29] \"CAP,BEP\"                                     \n[30] \"Bac techno/pro\"                              \n[31] \"Bac général\"                                 \n[32] \"Bac+1/+2\"                                    \n[33] \"Bac&gt;=+3\"                                     \n\nres.afc3&lt;-CA(tab2,col.sup=26:33,graph=F)\n\nfviz_ca_col(res.afc3,axes=c(1,2),label=\"col.sup\")\n\n\n\nfviz_ca_col(res.afc3,axes=c(1,3),label=\"col.sup\")"
  },
  {
    "objectID": "CorrectionTD4.html",
    "href": "CorrectionTD4.html",
    "title": "TD4",
    "section": "",
    "text": "Issues de l’enquête Formation des couples menée par l’institut national des études démographiques dans les années 1980, les données analysées croisent le groupe social des hommes avec le lieu où ils ont rencontré leur conjointe. À l’aide des résultats ci-dessous, répondez aux questions suivantes :\n\nDécrivez la base de données étudiée.\nRéalisez l’analyse en justifiant l’usage de la méthode d’analyse géométrique des données à utiliser ici.\nCombien de valeurs propres faut-il retenir ? Justifez.\nInterprétez et commentez les différents axes."
  },
  {
    "objectID": "CorrectionTD4.html#section",
    "href": "CorrectionTD4.html#section",
    "title": "TD4",
    "section": "",
    "text": "Issues de l’enquête Formation des couples menée par l’institut national des études démographiques dans les années 1980, les données analysées croisent le groupe social des hommes avec le lieu où ils ont rencontré leur conjointe. À l’aide des résultats ci-dessous, répondez aux questions suivantes :\n\nDécrivez la base de données étudiée.\nRéalisez l’analyse en justifiant l’usage de la méthode d’analyse géométrique des données à utiliser ici.\nCombien de valeurs propres faut-il retenir ? Justifez.\nInterprétez et commentez les différents axes."
  },
  {
    "objectID": "CorrectionTD4.html#préparation-de-lanalyse",
    "href": "CorrectionTD4.html#préparation-de-lanalyse",
    "title": "TD4",
    "section": "Préparation de l’analyse",
    "text": "Préparation de l’analyse\nD’abord, comme d’habitude, il faut indiquer le bon répertoire de travail où se trouve la base données que nous utilisons.\n\n# Répertoire de travail \nsetwd(\"E:/Enseignements/Cours UVSQ/Année 2023-2024/L3 Sociologie Analyse des données/TD/TD4\")\n\nDans ce TD, nous utilisons les packages listés ci-dessous.\nLe package readr permet d’ouvrir la base de données.\nLe package tibble permet de faire certains recodages de la base de données facilement.\nFactoMineR est le package permettant d’utiliser les fonctions d’analyse géométrique des données (ACP, AFC…). Le package explor permet de lire facilement les résultats d’une analyse. Le package factoextra contient plusieurs fonctions utiles pour analyser les résultats d’une analyse.\n\n# Appel des packages \nlibrary(readr) \nlibrary(tibble)  \nlibrary(FactoMineR) \nlibrary(explor) \nlibrary(factoextra)\n\nLe chargement a nécessité le package : ggplot2\n\n\nWelcome! Want to learn more? See two factoextra-related books at https://goo.gl/ve3WBa\n\n\nUtilisons la fonction read_csv2 pour charger la base de données qui s’appelle “TD4.csv”. R nous dit à cette occasion qu’il y a 16 lignes et 15 colonnes dans la base, qu’une variable (PCS) est de format “chr”, donc catégorielle, les autres sont de format “dbl” donc numériques.\nLa ligne de code suivante utilise la fonction column_to_rownames du package tibble pour indiquer que la variable (colonne) PCS doit être considérée comme le libellé des lignes de la base.\n\nsetwd(\"E:/Enseignements/Cours UVSQ/Année 2023-2024/L3 Sociologie Analyse des données/TD/TD4\")\n# Lecture du fichier : on place la première colonne comme nom de lignes  \nTD4 &lt;- read_csv2(\"TD4.csv\") \n\nℹ Using \"','\" as decimal and \"'.'\" as grouping mark. Use `read_delim()` for more control.\n\n\nRows: 16 Columns: 15\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \";\"\nchr  (1): PCS\ndbl (14): Etudes, Vacances, Fete entre amis, Association, Travail, Particuli...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n#Positionner la première colonne (nom des PCS) comme libellé des lignes (plutôt que comme colonne) \nTD4&lt;-column_to_rownames(TD4, var = \"PCS\") \n\nOn peut avoir une d’à quoi ressemble plus précisément la base avec la fonction head ou en tapant View(TD4) ce qui va ouvrir un onglet avec la base.\n\nhead(TD4)"
  },
  {
    "objectID": "CorrectionTD4.html#conduite-de-lafc",
    "href": "CorrectionTD4.html#conduite-de-lafc",
    "title": "TD4",
    "section": "Conduite de l’AFC",
    "text": "Conduite de l’AFC\nLa base est déjà prête pour l’analyse : il s’agit bien d’un tableau de contingence qui croise en ligne le groupe social des hommes (PCS) avec en colonne le lieu de rencontres du partenaire. Dans chaque cellule se trouve les effectifs. Ces données se prêtent bien à une AFC.\nOn conduit une AFC grâce à la fonction CA du package FactoMineR sur la base TD4. Les résultats de l’analyse sont stockés dans l’objet res.afc. La fonction CA nous sort automatiquement des graphiques.\n\n# Réalisation de l'AFC \nres.afc&lt;-CA(TD4)"
  },
  {
    "objectID": "CorrectionTD4.html#contribution-des-profils-lignes-et-des-profils-colonnes-sur-chacun-des-axes",
    "href": "CorrectionTD4.html#contribution-des-profils-lignes-et-des-profils-colonnes-sur-chacun-des-axes",
    "title": "TD4",
    "section": "Contribution des profils-lignes et des profils-colonnes sur chacun des axes",
    "text": "Contribution des profils-lignes et des profils-colonnes sur chacun des axes\nOn peut jeter un oeil sur les représentations géométriques mais il est aussi sage de regarder quels sont les profils-lignes et les profils-colonnes qui ont les plus fortes contributions sur chacun des axes. Ces profils qui ont une contribution supérieure à la contribution moyenne seront interprétés en priorité. En effet, les modalités des lignes et des colonnes ayant influencé le plus à la construction des axes sont celles dont les contributions sont les plus élevées. On pourra se contenter d’interpréter les résultats des modalités pour lesquelles les contributions sont supérieures à la contribution moyenne (cas où chaque profil-ligne ou profil-colonne contribuerait de manière égale à la structuration de l’axe).\nIci, il y a 16 lignes, donc la contribution moyenne des profils-lignes est de 100/16=6.25. Il y a 14 colonnes, donc la contribution moyenne des profils-colonnes est de 100/14=7.1."
  },
  {
    "objectID": "CorrectionTD4.html#interprétation-de-laxe-1",
    "href": "CorrectionTD4.html#interprétation-de-laxe-1",
    "title": "TD4",
    "section": "Interprétation de l’axe 1",
    "text": "Interprétation de l’axe 1\nLa fonction fviz_contrib permet de visualiser facilement les contributions des modalités sur les axes.\nSur l’axe 1, on interprète prioritairement les profils-lignes des cadres et professions intermédiaires de la fonction publique, des ingénieurs et cadres ou professions d’entreprises, des ouvriers non qualifiés, des professions libérales, des gros agriculteurs, des ouvriers de l’artisanat et des ouvriers de l’industrie.\n\n##Visualiser la contribution des lignes par rapport à la contribution moyenne\nfviz_contrib(res.afc,choice=\"row\",axes =1) \n\n\n\n\nSur ce même axe, on interprète prioritairement les profils-colonnes des études, du bal, des vacances et des associations (à la limite).\n\n##Visualiser la contribution des lignes par rapport à la contribution moyenne \nfviz_contrib(res.afc,choice=\"col\",axes =1) \n\n\n\n\nVoyons comment se structure alors le premier axe dans le premier plan factoriel (axes 1 et 2).\nA gauche, on trouve les groupes sociaux du bas de la hiérarchie des PCS (les ouvriers, notons qu’il s’agit ici d’une ancienne nomenclature des PCS ! l’enquête date des années 1980) et les gros agriculteurs, qui ont des profils de lieu de rencontre similaires : au bal, au spectable. A droite, ce sont des classes supérieures et moyennes de la fonction publique, qui ont rencontré leur partenaire au cours de leurs études (ce sont aussi les groupes sociaux qui en moyenne ont fait les études les plus longues…) et en vacances (justement, ce sont les groupes sociaux qui partent le plus fréquemment en vacances…).\n\n##Visualiser la contribution des lignes et colonnes qui ont une contribution supérieure à la contribution moyenne sur l'axe 1.  \nrowcontrib1&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,1]&gt;100/16] \n\ncolcontrib1&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,1]&gt;100/14] \n\nfviz_ca_biplot(res.afc,axes=c(1,2),select.row = list(name = rowcontrib1),select.col=list(name=colcontrib1))"
  },
  {
    "objectID": "CorrectionTD4.html#interprétation-des-axes-2-et-3",
    "href": "CorrectionTD4.html#interprétation-des-axes-2-et-3",
    "title": "TD4",
    "section": "Interprétation des axes 2 et 3",
    "text": "Interprétation des axes 2 et 3\nLa même procédure peut être utilisée pour les axes 2 et 3.\nPour les profils-lignes :\n\n##Visualiser la contribution des lignes par rapport à la contribution moyenne  \nfviz_contrib(res.afc,choice=\"row\",axes =2)  \n\n\n\nfviz_contrib(res.afc,choice=\"row\",axes =3) \n\n\n\n\nPour les profils-colonnes :\n\n##Visualiser la contribution des lignes par rapport à la contribution moyenne   \nfviz_contrib(res.afc,choice=\"col\",axes =2)  \n\n\n\nfviz_contrib(res.afc,choice=\"col\",axes =3) \n\n\n\n\nVoyons comment se structure alors le premier axe dans le plan factoriel des axes 2 et 3 qui présente, on l’a déjà dit des principes d’associations secondaires par rapport à l’association principale dénotée sur le premier axe de l’analyse.\nL’axe 2 oppose les commerçants et les employés des entreprises qui rencontrent leur partenaire sur leur lieu de travail aux autres groupes sociaux. Il montre une spécificité du lieu de recontre pour ces deux groupes sociaux (par rapport aux autres professions où on se rencontre sur le temps de loisir).\nL’axe 3 oppose les gros agriculteurs et dans une moindre mesure les commerçants qui rencontrent leur partenaire par le biais d’annonces par rapport aux autres groupes sociaux (en particulier les ouvriers). C’est un axe d’opposition entre la rencontre par un médium versus par des contacts sociaux.\n\n##Visualiser la contribution des lignes et colonnes qui ont une contribution supérieure à la contribution moyenne sur les axes 2 et 3.     \nrowcontrib2&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,2]&gt;100/16]\n\ncolcontrib2&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,2]&gt;100/14] \n\nrowcontrib3&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,3]&gt;100/16] \n\ncolcontrib3&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,3]&gt;100/14] \n\nrowcontrib23&lt;-c(rowcontrib2,rowcontrib3) \ncolcontrib23&lt;-c(colcontrib2,colcontrib3)  \n\nfviz_ca_biplot(res.afc,axes=c(2,3),select.row = list(name = rowcontrib23),select.col=list(name=colcontrib23))  \n\n\n\n\nBien sur, rien n’empêche d’utiliser également la fonction explor() pour étudier les résultats de l’analyse !\nOn peut vouloir également mettre en relation nos interprétations en calculant les probabilités conjointes, les pourcentages en lignes et en colonne sur notre tableau de contingence. On écrira :\n\nmytable&lt;-as.table(as.matrix(TD4))  \nprop.table(mytable)*100 \n# cell percentages \nprop.table(mytable, 1)*100 \n# column percentages  \nprop.table(mytable, 2)*100 \n# column percentages"
  },
  {
    "objectID": "CorrectionTD6.html",
    "href": "CorrectionTD6.html",
    "title": "TD6",
    "section": "",
    "text": "Les données se trouvent dans le fichier « tab.csv ».\nOn dispose de données départementales. Pour chaque département métropolitain, on connait les votes des premiers tours des élections présidentielles en 2017 (d’après les résultats officiels fournis par le Ministère de l’Intérieur).\n\n\nL’AFC permet d’étudier les départements qui se ressemblent et ceux qui sont les plus distincts les uns des autres en fonction des résultats électoraux. Elle permet aussi d’étudier les candidats à l’élection présidentielle, en identifiant celles et ceux qui ont des résultats similaires et distincts dans les différents départements : les candidats qui se ressemblent ont des résultats relativement plus élevés (resp. plus faibles) dans les mêmes départements (attention, on parle ici relativement).\n\n\n\nComme d’habitude, on commence par charger les packages R nécessaires à l’analyse :\n\nlibrary(\"FactoMineR\")\nlibrary(\"explor\")\nlibrary(ggplot2)\nlibrary(readr)\nlibrary(factoextra)\nlibrary(dplyr)\nlibrary(tibble)\n\nOn peut ensuite indiquer le répertoire où sont stockées les données et charger les données. On utilise la fonction column_to_rownames pour dire à R que la première colonne (nom des départements) doit être ocnsidérée comme le nom des lignes du tableau.\n\n# Attribution du répertoire de travail : c'est l'emplacement physique oé se trouvent les jeux de données qui seront utilisés et crées\nsetwd(\"E:/Enseignements/Cours UVSQ/Année 2023-2024/L3 Sociologie Analyse des données/TD/TD6\")\n\n# AFC sur les résultats départementaux du premier tour des élections présidentielles\n# Lecture du fichier csv. \ntab&lt;-read_csv(file=\"elections.csv\",locale=locale(encoding=\"latin1\"))\ntab&lt;-column_to_rownames(tab,var=\"Départements\")\n\nOn lance l’AFC à l’aide de la fonction CA du package FactoMineR. Attention, il y a une colonne “numéro du département” qui est présente dans ce tableau. On souhaite la conserver pour la suite, mais on n’en tient pas compte ici.\n\n# Analyse factorielle des correspondances\nres.afc&lt;-CA(tab[,-1],graph=F)\n\nPour analyser l’AFC, on peut utiliser les fonctions fviz ou explor.\n\n\n\nPour le critère de Kaiser, on regarde les valeurs propres qui ont une valeur supérieure à la valeur propre moyenne :\n\nvp&lt;-res.afc$eig # On regarde lesquelles sont supérieures à l'inertie moyenne \nvp[,1]&gt;mean(vp[,1]) \n\n dim 1  dim 2  dim 3  dim 4  dim 5  dim 6  dim 7  dim 8  dim 9 dim 10 \n  TRUE   TRUE   TRUE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE \n\n\nCela nous pousserait à examiner 3 axes.\nPour le critère du coude, on peut regarder l’histogramme des valeurs propres :\n\n##Le scree plot des valeurs propres \n\nfviz_eig(res.afc,addlabels=T,ncp =10) \n\n\n\n\nOn a un premier décrochage entre la première et seconde dimension de l’AFC : la première est prépondérante. Ensuite un décrochage entre la troisième et la quatrième : il semble que trois axes aient une valeur propre importante.\n\n\n\nPar simplicité, regardons ici les deux premiers axes.\nQuelles sont les lignes (départements) et les colonnes (candidats) qui ont les plus fortes contributions sur la première dimension (contribution supérieure à la contribution moyenne) ?\n\n##Visualiser la contribution des lignes et colonnes qui ont une contribution supérieure à la contribution moyenne sur l'axe 1. \nrowcontrib1&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,1]&gt;100/nrow(tab)]\ncolcontrib1&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,1]&gt;100/ncol(tab)]\nfviz_ca_biplot(res.afc,axes=c(1,2),\n               select.row = list(name = rowcontrib1),\n               select.col=list(name=colcontrib1))\n\n\n\n\nCet axe oppose les départements qui ont relativement davantage voté pour Macron au premier tour versus les départements qui ont davantage voté Le Pen au premier tour. Parmi les départements qui ont davantage voté Macron par rapport aux autres, ceux de l’Ile de France et de Bretagne notamment. Parmi les départements qui ont davantage voté Le Pen, ceux du Nord de la France et du sud-est.\nLe principal clivage électoral à l’échelle départementale en 2017 n’est donc pas un clivage droite-gauche, mais un clivage entre le président sortant (centriste/libéral…) et l’extrême-droite.\nMais comment les candidats de gauche et de droite se positionnent sur cet axe ? Même s’ils ont une contribution plus faible à la structuration de l’axe, on peut les projeter pour voir où ils se positionnent par rapport aux différents départements. On peut utiliser l’indicateur du cos2 (valeur entre 0 et 1) comme qualité de représentation pour voir s’ils sont plus ou moins bien représentés sur cet axe.\nA part Macron et Le Pen, Hamon est plutôt bien représenté sur cet axe, et viennent ensuite Dupont-Aignan, Arthaud et Fillon, mais qui sont nettement moins bien représentés. Les autres sont définitivement mal représentés sur cet axe (leur coordonnée est ainsi proche de l’origine).\n\ndata.frame(Axe1_cos2=sort(res.afc$col$cos2[,1],decreasing = T))\n\n                 Axe1_cos2\nLe.Pen        0.9924666859\nMacron        0.9304129092\nHamon         0.7199111798\nDupont.Aignan 0.3054563501\nArthaud       0.2407110932\nFillon        0.1490396460\nMélenchon     0.0674743898\nCheminade     0.0662298705\nPoutou        0.0110155375\nLassalle      0.0009079383\nAsselineau    0.0002071592\n\n\n\ncolcos1&lt;-rownames(res.afc$col$cos2)[res.afc$col$cos2[,1]&gt;.1]\n\nfviz_ca_col(res.afc,axes=c(1,2),select.col=list(name=colcos1))\n\n\n\n\nHamon fait des scores relativement plus élevés là où Macron fait des scores élevés. C’est aussi le cas de Fillon, même si ce n’est pas sa seule particularité. En revanche, Arthaud et Dupont-Aignan font des scores relativement plus élevés là où Le Pen fait des scores élevés, même si attention leur qualité de représentation sur l’axe est plus faible…\n\n##Visualiser la contribution des lignes et colonnes qui ont une contribution supérieure à la contribution moyenne sur l'axe 2. \nrowcontrib2&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,2]&gt;100/nrow(tab)]\ncolcontrib2&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,2]&gt;100/ncol(tab)]\nfviz_ca_biplot(res.afc,axes=c(1,2),\n               select.row = list(name = rowcontrib2),\n               select.col=list(name=colcontrib2))\n\n\n\n\nL’axe 2 révèle un axe lié à l’ancrage géographique des candidats : Lassalle est associé au haut de l’axe 2, Fillon au bas de cet axe. Mélenchon est dans une position intermédiaire en haut de l’axe 2.\n\ndata.frame(Axe2_cos2=sort(res.afc$col$cos2[,2],decreasing = T))\n\n                 Axe2_cos2\nFillon        6.864982e-01\nMélenchon     5.409861e-01\nLassalle      3.605284e-01\nPoutou        2.164280e-01\nHamon         1.072459e-01\nDupont.Aignan 3.534046e-02\nArthaud       4.296670e-03\nAsselineau    2.723210e-03\nMacron        2.242355e-03\nCheminade     1.165384e-03\nLe.Pen        7.262012e-05\n\n\nEn plus de ces candidats qui contribuent beaucoup à l’axe, on voit que Poutou et Hamon ont aussi une plutôt bonne qualité de représentation…\n\ncolcos2&lt;-rownames(res.afc$col$cos2)[res.afc$col$cos2[,2]&gt;.1]\n\nfviz_ca_col(res.afc,axes=c(1,2),select.col=list(name=colcos2))\n\n\n\n\nMême s’ils sont positionnés de manière assez proches de l’origine sur l’axe 2, on voit que ces candidats partagent une certaine similarité dans leurs scores électoraux avec Lassalle. Pour ce dernier, sa spécificité ressort de son ancrage électoral dans les Pyrénées dont il est originaire, tandis que Fillon avait son “fief électoral dans la Sarthe, et qu’on voit bien qu’il est associé sur l’axe 2 à des départements qui sont traditionnellement plutôt de”droite” (la Vendée, les Yvelines, les Hauts de Seine…). Derrière un axe d’ancrage géographique des candidats se cache donc aussi un clivage droite-gauche sur ce second axe !\n\n\n\nUn département représentatif serait un département qui se différencie peu de l’origine sur les axes de l’analyse factorielle. Proche de l’origine, c’est un département “moyen” où les électeurs ne votent ni plus ni moins que la moyenne nationale pour les différents candidats qui ressortent sur les axes.\n\nfviz_ca_row(res.afc,axes=c(1,2),col.row=\"contrib\",pointsize=1,labelsize=3)\n\n\n\n#La coloration des départements en fonction de la contribution correspond à la contribution moyenne sur les axes 1 et 2\n\nLa figure n’est pas aisée à lire mais c’est la Charente-Maritime qui est le plus proche de l’origine sur le premier et deuxième axe. On pourra utiliser la fonction explor() pour repérer plus facilement les points sur le plan factoriel.\nAutre méthode plus robuste, car ici on a seulement regardé graphiquement le département moyen sur le premier plan factoriel. Un profil-moyen correspond à un profil qui contribue peu globalement à la dispersion des points du nuage factoriel (sur tous les axes), relativement à son poids démographique (nombre d’électeur total dans le département). En effet, on sait que dans une AFC la contribution des lignes et des colonnes dépend de leur poids (un plus grand poids correspond à une plus grande contribution, c’est d’ailleurs ce qui explique que Macron ait une contribution plus importante sur l’axe 1 que Hamon par exemple, le premier a plus d’électeurs). Donc on va chercher le département qui a la contribution à l’inertie globale du nuage des départements la plus faible, relativement à son poids dans le total des électeurs.\n\n## Poids de chaque département\npoids&lt;-res.afc$call$marge.row\n## Contribution à l'inertie de chaque département\ncontribution&lt;-res.afc$row$inertia/sum(res.afc$row$inertia)\n## Ratio contribution poids\nratio&lt;-contribution/poids\n## On affiche directement la valeur minimale du ratio\nwhich.min(ratio)\n\nCharente-Maritime \n               17 \n\n##Si on n'avait pas tenu compte du poids : \nnames(contribution)&lt;-row.names(tab)\nwhich.min(contribution)\n\nAllier \n     3 \n\n\nOn voit que relativement à son poids en nombre d’électeurs, c’est bien la Charente-Maritime qui contribue le moins à l’inertie du nuage, c’est ce département qui a le profil le plus “moyen”. Si on n’avait pas tenu compte du poids du nombre total d’électeurs, ça aurait été l’Allier, mais qui contribue peu à l’inertie du fait du faible nombre d’électeurs dans ce département…\n\n\n\nOn va utiliser des fichiers complémentaires, un fond de carte. C’est un type de données particulier qui associe des objets à des coordonnées (géodésiques) pour pouvoir représenter ces objets dans un espace. On pourra par exemple retrouver un référencement de fonds de cartes ici.\n\n###Représentation spatiale des résultats\n\n#On charge une base avec les coordonnées spatiales des départements (format shp)\nlibrary(sf)\n##Pour zoomer sur l'ile de France\nlibrary(ggmapinset)\n\nsetwd(\"E:/Enseignements/Cours UVSQ/Année 2023-2024/L3 Sociologie Analyse des données/TD/TD6/Cartographie\")\ndep &lt;- st_read(\"DEPARTEMENT.shp\")\n\nReading layer `DEPARTEMENT' from data source \n  `E:\\Enseignements\\Cours UVSQ\\Année 2023-2024\\L3 Sociologie Analyse des données\\TD\\TD6\\Cartographie\\DEPARTEMENT.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 96 features and 11 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 99217.1 ymin: 6049646 xmax: 1242417 ymax: 7110480\nProjected CRS: RGF93 v1 / Lambert-93\n\n#On crée une base avec les coordonnées sur les trois premiers axes. On indique l'id du département avec le code dans tab\ncoordafc&lt;-as.data.frame(cbind(tab$Code,res.afc$row$coord[,1:3]))\nnames(coordafc)&lt;-c(\"Code\",\"Dim1\",\"Dim2\",\"Dim3\")\ncoordafc&lt;-coordafc %&gt;% mutate_at(vars(Dim1:Dim3),as.numeric)\n#On ajoute des 0 pour les codes de département qui n'ont qu'un chiffre pour matcher avec la base de fond de carte\ncoordafc$Code&lt;-ifelse(nchar(coordafc$Code)==1,paste0(\"0\",coordafc$Code),coordafc$Code)\n##On fait une jointure avec la base du fond de carte\ndep2 &lt;- dep %&gt;% left_join(coordafc,by=c(\"CODE_DEPT\"=\"Code\"))\n\n\nd1 &lt;-  ggplot(dep2) + \n  geom_sf(aes(fill=Dim1),colour=\"darkgrey\")+\n  scale_fill_viridis_c(option=\"C\")+\n  theme_void()\nd1\n\n\n\n\nCette première carte est intéressante, mais on peut vouloir zoomer sur l’Ile de France.\n\n# Pour faire le zoom autour de Paris sur la carte:\ninset_centre &lt;- sf::st_centroid(sf::st_geometry(dep2)[dep2$NOM_DEPT == \"PARIS\"])\n\n#La même carte avec le zoom autour de Paris: \nd1&lt;-ggplot(dep2) +\n  geom_sf_inset(aes(fill = Dim1),colour=\"darkgrey\") +\n  geom_inset_frame() +\n  coord_sf_inset(inset = configure_inset(centre = inset_centre, scale = 2, units = \"mi\",\n                                         translation = c(400, 0), radius = 60))+\n  scale_fill_viridis_c(option=\"C\")+\n  labs(fill=\"Dim.1 de l'AFC\")+\n  theme_void()\nd1\n\n\n\n\nC’est mieux ! On repère ainsi les clivages électoraux résumés sur le premier axe de l’AFC.\nOn peut préférer une représentation en noir et blanc :\n\n#La même carte en noir et gris\nd1&lt;-ggplot(dep2) +\n  geom_sf_inset(aes(fill = Dim1),colour=\"darkgrey\") +\n  geom_inset_frame() +\n  coord_sf_inset(inset = configure_inset(centre = inset_centre, scale = 2, units = \"mi\",\n                                         translation = c(400, 0), radius = 60))+\n  scale_fill_gradient(low=\"black\",high=\"white\")+\n  labs(fill=\"Dim.1 de l'AFC\")+\n  theme_void()\nd1\n\n\n\n\nOn a ici représenté les coordonnées du premier axe de l’AFC sur la carte. La tonalité de l’échelle des couleurs correspond ainsi à une nuance de position entre le département le plus à gauche sur l’axe 1 et le plus à droite sur l’axe 2. On aurait pu discrétiser les coordonnées et avoir ainsi des classes de département par exemple.\nEnfin, on peut vouloir vérifier la pertinence de l’AFC en projetant les résultats électoraux bruts. Par exemple, pour le score de Macron :\n\n#On calcule d'abord le pourcentage des votes en faveur de chaque candidat par departement\n##On fait une jointure avec la base du fond de carte\n\ntabprop&lt;-as.data.frame(cbind(Code=tab$Code,tab[-1]/rowSums(tab[,-1])*100))\ntabprop$Code&lt;-ifelse(nchar(tabprop$Code)==1,paste0(\"0\",tabprop$Code),tabprop$Code)\n\ndep3 &lt;- dep %&gt;% left_join(tabprop,by=c(\"CODE_DEPT\"=\"Code\"))\n\nmacron&lt;-ggplot(dep3) +\n  geom_sf_inset(aes(fill = Macron),colour=\"darkgrey\") +\n  geom_inset_frame() +\n  coord_sf_inset(inset = configure_inset(centre = inset_centre, scale = 2, units = \"mi\",\n                                         translation = c(400, 0), radius = 60))+\n  scale_fill_viridis_c(option=\"E\",direction =-1)+\n  labs(fill=\"Vote Macron\")+\n  theme_void()\nmacron\n\n\n\n\nEt de Le Pen, on voit grossièrement que les deux candidats ont des scores élevés dans des département différents.\n\nlepen&lt;-ggplot(dep3) +\n  geom_sf_inset(aes(fill = Le.Pen),colour=\"darkgrey\") +\n  geom_inset_frame() +\n  coord_sf_inset(inset = configure_inset(centre = inset_centre, scale = 2, units = \"mi\",\n                                         translation = c(400, 0), radius = 60))+\n  scale_fill_viridis_c(direction=-1)+\n  labs(fill=\"Vote Le Pen\")+\n  theme_void()\nlepen\n\n\n\n\nNote : on s’est retenu d’interpréter ici les clivages électoraux à l’échelle des départements en fonction des propriétés socio-démographiques de ces mêmes départements qui sont importants. On pourrait par exemple étendre cette analyse en ajoutant des colonnes supplémentaires avec les caractéristiques socio-démographiques supplémentaires. Pour une analyse récente de la sociologie électorale à l’échelle des communes françaises, on pourra se reporter à Cagé, J., & Piketty, T. (2023). Une histoire du conflit politique: élections et inégalités sociales en France, 1789-2022. Paris XIXe: Éditions du Seuil."
  },
  {
    "objectID": "CorrectionTD6.html#quels-sont-les-objectifs-dune-afc-sur-un-tel-tableau-de-données",
    "href": "CorrectionTD6.html#quels-sont-les-objectifs-dune-afc-sur-un-tel-tableau-de-données",
    "title": "TD6",
    "section": "",
    "text": "L’AFC permet d’étudier les départements qui se ressemblent et ceux qui sont les plus distincts les uns des autres en fonction des résultats électoraux. Elle permet aussi d’étudier les candidats à l’élection présidentielle, en identifiant celles et ceux qui ont des résultats similaires et distincts dans les différents départements : les candidats qui se ressemblent ont des résultats relativement plus élevés (resp. plus faibles) dans les mêmes départements (attention, on parle ici relativement)."
  },
  {
    "objectID": "CorrectionTD6.html#mettre-en-oeuvre-une-afc",
    "href": "CorrectionTD6.html#mettre-en-oeuvre-une-afc",
    "title": "TD6",
    "section": "",
    "text": "Comme d’habitude, on commence par charger les packages R nécessaires à l’analyse :\n\nlibrary(\"FactoMineR\")\nlibrary(\"explor\")\nlibrary(ggplot2)\nlibrary(readr)\nlibrary(factoextra)\nlibrary(dplyr)\nlibrary(tibble)\n\nOn peut ensuite indiquer le répertoire où sont stockées les données et charger les données. On utilise la fonction column_to_rownames pour dire à R que la première colonne (nom des départements) doit être ocnsidérée comme le nom des lignes du tableau.\n\n# Attribution du répertoire de travail : c'est l'emplacement physique oé se trouvent les jeux de données qui seront utilisés et crées\nsetwd(\"E:/Enseignements/Cours UVSQ/Année 2023-2024/L3 Sociologie Analyse des données/TD/TD6\")\n\n# AFC sur les résultats départementaux du premier tour des élections présidentielles\n# Lecture du fichier csv. \ntab&lt;-read_csv(file=\"elections.csv\",locale=locale(encoding=\"latin1\"))\ntab&lt;-column_to_rownames(tab,var=\"Départements\")\n\nOn lance l’AFC à l’aide de la fonction CA du package FactoMineR. Attention, il y a une colonne “numéro du département” qui est présente dans ce tableau. On souhaite la conserver pour la suite, mais on n’en tient pas compte ici.\n\n# Analyse factorielle des correspondances\nres.afc&lt;-CA(tab[,-1],graph=F)\n\nPour analyser l’AFC, on peut utiliser les fonctions fviz ou explor."
  },
  {
    "objectID": "CorrectionTD6.html#combien-daxes-retenir",
    "href": "CorrectionTD6.html#combien-daxes-retenir",
    "title": "TD6",
    "section": "",
    "text": "Pour le critère de Kaiser, on regarde les valeurs propres qui ont une valeur supérieure à la valeur propre moyenne :\n\nvp&lt;-res.afc$eig # On regarde lesquelles sont supérieures à l'inertie moyenne \nvp[,1]&gt;mean(vp[,1]) \n\n dim 1  dim 2  dim 3  dim 4  dim 5  dim 6  dim 7  dim 8  dim 9 dim 10 \n  TRUE   TRUE   TRUE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE \n\n\nCela nous pousserait à examiner 3 axes.\nPour le critère du coude, on peut regarder l’histogramme des valeurs propres :\n\n##Le scree plot des valeurs propres \n\nfviz_eig(res.afc,addlabels=T,ncp =10) \n\n\n\n\nOn a un premier décrochage entre la première et seconde dimension de l’AFC : la première est prépondérante. Ensuite un décrochage entre la troisième et la quatrième : il semble que trois axes aient une valeur propre importante."
  },
  {
    "objectID": "CorrectionTD6.html#interprétation-des-axes",
    "href": "CorrectionTD6.html#interprétation-des-axes",
    "title": "TD6",
    "section": "",
    "text": "Par simplicité, regardons ici les deux premiers axes.\nQuelles sont les lignes (départements) et les colonnes (candidats) qui ont les plus fortes contributions sur la première dimension (contribution supérieure à la contribution moyenne) ?\n\n##Visualiser la contribution des lignes et colonnes qui ont une contribution supérieure à la contribution moyenne sur l'axe 1. \nrowcontrib1&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,1]&gt;100/nrow(tab)]\ncolcontrib1&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,1]&gt;100/ncol(tab)]\nfviz_ca_biplot(res.afc,axes=c(1,2),\n               select.row = list(name = rowcontrib1),\n               select.col=list(name=colcontrib1))\n\n\n\n\nCet axe oppose les départements qui ont relativement davantage voté pour Macron au premier tour versus les départements qui ont davantage voté Le Pen au premier tour. Parmi les départements qui ont davantage voté Macron par rapport aux autres, ceux de l’Ile de France et de Bretagne notamment. Parmi les départements qui ont davantage voté Le Pen, ceux du Nord de la France et du sud-est.\nLe principal clivage électoral à l’échelle départementale en 2017 n’est donc pas un clivage droite-gauche, mais un clivage entre le président sortant (centriste/libéral…) et l’extrême-droite.\nMais comment les candidats de gauche et de droite se positionnent sur cet axe ? Même s’ils ont une contribution plus faible à la structuration de l’axe, on peut les projeter pour voir où ils se positionnent par rapport aux différents départements. On peut utiliser l’indicateur du cos2 (valeur entre 0 et 1) comme qualité de représentation pour voir s’ils sont plus ou moins bien représentés sur cet axe.\nA part Macron et Le Pen, Hamon est plutôt bien représenté sur cet axe, et viennent ensuite Dupont-Aignan, Arthaud et Fillon, mais qui sont nettement moins bien représentés. Les autres sont définitivement mal représentés sur cet axe (leur coordonnée est ainsi proche de l’origine).\n\ndata.frame(Axe1_cos2=sort(res.afc$col$cos2[,1],decreasing = T))\n\n                 Axe1_cos2\nLe.Pen        0.9924666859\nMacron        0.9304129092\nHamon         0.7199111798\nDupont.Aignan 0.3054563501\nArthaud       0.2407110932\nFillon        0.1490396460\nMélenchon     0.0674743898\nCheminade     0.0662298705\nPoutou        0.0110155375\nLassalle      0.0009079383\nAsselineau    0.0002071592\n\n\n\ncolcos1&lt;-rownames(res.afc$col$cos2)[res.afc$col$cos2[,1]&gt;.1]\n\nfviz_ca_col(res.afc,axes=c(1,2),select.col=list(name=colcos1))\n\n\n\n\nHamon fait des scores relativement plus élevés là où Macron fait des scores élevés. C’est aussi le cas de Fillon, même si ce n’est pas sa seule particularité. En revanche, Arthaud et Dupont-Aignan font des scores relativement plus élevés là où Le Pen fait des scores élevés, même si attention leur qualité de représentation sur l’axe est plus faible…\n\n##Visualiser la contribution des lignes et colonnes qui ont une contribution supérieure à la contribution moyenne sur l'axe 2. \nrowcontrib2&lt;-rownames(res.afc$row$contrib)[res.afc$row$contrib[,2]&gt;100/nrow(tab)]\ncolcontrib2&lt;-rownames(res.afc$col$contrib)[res.afc$col$contrib[,2]&gt;100/ncol(tab)]\nfviz_ca_biplot(res.afc,axes=c(1,2),\n               select.row = list(name = rowcontrib2),\n               select.col=list(name=colcontrib2))\n\n\n\n\nL’axe 2 révèle un axe lié à l’ancrage géographique des candidats : Lassalle est associé au haut de l’axe 2, Fillon au bas de cet axe. Mélenchon est dans une position intermédiaire en haut de l’axe 2.\n\ndata.frame(Axe2_cos2=sort(res.afc$col$cos2[,2],decreasing = T))\n\n                 Axe2_cos2\nFillon        6.864982e-01\nMélenchon     5.409861e-01\nLassalle      3.605284e-01\nPoutou        2.164280e-01\nHamon         1.072459e-01\nDupont.Aignan 3.534046e-02\nArthaud       4.296670e-03\nAsselineau    2.723210e-03\nMacron        2.242355e-03\nCheminade     1.165384e-03\nLe.Pen        7.262012e-05\n\n\nEn plus de ces candidats qui contribuent beaucoup à l’axe, on voit que Poutou et Hamon ont aussi une plutôt bonne qualité de représentation…\n\ncolcos2&lt;-rownames(res.afc$col$cos2)[res.afc$col$cos2[,2]&gt;.1]\n\nfviz_ca_col(res.afc,axes=c(1,2),select.col=list(name=colcos2))\n\n\n\n\nMême s’ils sont positionnés de manière assez proches de l’origine sur l’axe 2, on voit que ces candidats partagent une certaine similarité dans leurs scores électoraux avec Lassalle. Pour ce dernier, sa spécificité ressort de son ancrage électoral dans les Pyrénées dont il est originaire, tandis que Fillon avait son “fief électoral dans la Sarthe, et qu’on voit bien qu’il est associé sur l’axe 2 à des départements qui sont traditionnellement plutôt de”droite” (la Vendée, les Yvelines, les Hauts de Seine…). Derrière un axe d’ancrage géographique des candidats se cache donc aussi un clivage droite-gauche sur ce second axe !"
  },
  {
    "objectID": "CorrectionTD6.html#quel-département-choisit-on-si-on-désire-faire-un-sondage-préélectoral-de-la-meilleure-qualité-possible-dans-un-département-représentatif",
    "href": "CorrectionTD6.html#quel-département-choisit-on-si-on-désire-faire-un-sondage-préélectoral-de-la-meilleure-qualité-possible-dans-un-département-représentatif",
    "title": "TD6",
    "section": "",
    "text": "Un département représentatif serait un département qui se différencie peu de l’origine sur les axes de l’analyse factorielle. Proche de l’origine, c’est un département “moyen” où les électeurs ne votent ni plus ni moins que la moyenne nationale pour les différents candidats qui ressortent sur les axes.\n\nfviz_ca_row(res.afc,axes=c(1,2),col.row=\"contrib\",pointsize=1,labelsize=3)\n\n\n\n#La coloration des départements en fonction de la contribution correspond à la contribution moyenne sur les axes 1 et 2\n\nLa figure n’est pas aisée à lire mais c’est la Charente-Maritime qui est le plus proche de l’origine sur le premier et deuxième axe. On pourra utiliser la fonction explor() pour repérer plus facilement les points sur le plan factoriel.\nAutre méthode plus robuste, car ici on a seulement regardé graphiquement le département moyen sur le premier plan factoriel. Un profil-moyen correspond à un profil qui contribue peu globalement à la dispersion des points du nuage factoriel (sur tous les axes), relativement à son poids démographique (nombre d’électeur total dans le département). En effet, on sait que dans une AFC la contribution des lignes et des colonnes dépend de leur poids (un plus grand poids correspond à une plus grande contribution, c’est d’ailleurs ce qui explique que Macron ait une contribution plus importante sur l’axe 1 que Hamon par exemple, le premier a plus d’électeurs). Donc on va chercher le département qui a la contribution à l’inertie globale du nuage des départements la plus faible, relativement à son poids dans le total des électeurs.\n\n## Poids de chaque département\npoids&lt;-res.afc$call$marge.row\n## Contribution à l'inertie de chaque département\ncontribution&lt;-res.afc$row$inertia/sum(res.afc$row$inertia)\n## Ratio contribution poids\nratio&lt;-contribution/poids\n## On affiche directement la valeur minimale du ratio\nwhich.min(ratio)\n\nCharente-Maritime \n               17 \n\n##Si on n'avait pas tenu compte du poids : \nnames(contribution)&lt;-row.names(tab)\nwhich.min(contribution)\n\nAllier \n     3 \n\n\nOn voit que relativement à son poids en nombre d’électeurs, c’est bien la Charente-Maritime qui contribue le moins à l’inertie du nuage, c’est ce département qui a le profil le plus “moyen”. Si on n’avait pas tenu compte du poids du nombre total d’électeurs, ça aurait été l’Allier, mais qui contribue peu à l’inertie du fait du faible nombre d’électeurs dans ce département…"
  },
  {
    "objectID": "CorrectionTD6.html#a-laide-du-script-r-fourni-représenter-sous-forme-cartographique-les-coordonnées-des-départements-sur-les-axes-retenus.",
    "href": "CorrectionTD6.html#a-laide-du-script-r-fourni-représenter-sous-forme-cartographique-les-coordonnées-des-départements-sur-les-axes-retenus.",
    "title": "TD6",
    "section": "",
    "text": "On va utiliser des fichiers complémentaires, un fond de carte. C’est un type de données particulier qui associe des objets à des coordonnées (géodésiques) pour pouvoir représenter ces objets dans un espace. On pourra par exemple retrouver un référencement de fonds de cartes ici.\n\n###Représentation spatiale des résultats\n\n#On charge une base avec les coordonnées spatiales des départements (format shp)\nlibrary(sf)\n##Pour zoomer sur l'ile de France\nlibrary(ggmapinset)\n\nsetwd(\"E:/Enseignements/Cours UVSQ/Année 2023-2024/L3 Sociologie Analyse des données/TD/TD6/Cartographie\")\ndep &lt;- st_read(\"DEPARTEMENT.shp\")\n\nReading layer `DEPARTEMENT' from data source \n  `E:\\Enseignements\\Cours UVSQ\\Année 2023-2024\\L3 Sociologie Analyse des données\\TD\\TD6\\Cartographie\\DEPARTEMENT.shp' \n  using driver `ESRI Shapefile'\nSimple feature collection with 96 features and 11 fields\nGeometry type: MULTIPOLYGON\nDimension:     XY\nBounding box:  xmin: 99217.1 ymin: 6049646 xmax: 1242417 ymax: 7110480\nProjected CRS: RGF93 v1 / Lambert-93\n\n#On crée une base avec les coordonnées sur les trois premiers axes. On indique l'id du département avec le code dans tab\ncoordafc&lt;-as.data.frame(cbind(tab$Code,res.afc$row$coord[,1:3]))\nnames(coordafc)&lt;-c(\"Code\",\"Dim1\",\"Dim2\",\"Dim3\")\ncoordafc&lt;-coordafc %&gt;% mutate_at(vars(Dim1:Dim3),as.numeric)\n#On ajoute des 0 pour les codes de département qui n'ont qu'un chiffre pour matcher avec la base de fond de carte\ncoordafc$Code&lt;-ifelse(nchar(coordafc$Code)==1,paste0(\"0\",coordafc$Code),coordafc$Code)\n##On fait une jointure avec la base du fond de carte\ndep2 &lt;- dep %&gt;% left_join(coordafc,by=c(\"CODE_DEPT\"=\"Code\"))\n\n\nd1 &lt;-  ggplot(dep2) + \n  geom_sf(aes(fill=Dim1),colour=\"darkgrey\")+\n  scale_fill_viridis_c(option=\"C\")+\n  theme_void()\nd1\n\n\n\n\nCette première carte est intéressante, mais on peut vouloir zoomer sur l’Ile de France.\n\n# Pour faire le zoom autour de Paris sur la carte:\ninset_centre &lt;- sf::st_centroid(sf::st_geometry(dep2)[dep2$NOM_DEPT == \"PARIS\"])\n\n#La même carte avec le zoom autour de Paris: \nd1&lt;-ggplot(dep2) +\n  geom_sf_inset(aes(fill = Dim1),colour=\"darkgrey\") +\n  geom_inset_frame() +\n  coord_sf_inset(inset = configure_inset(centre = inset_centre, scale = 2, units = \"mi\",\n                                         translation = c(400, 0), radius = 60))+\n  scale_fill_viridis_c(option=\"C\")+\n  labs(fill=\"Dim.1 de l'AFC\")+\n  theme_void()\nd1\n\n\n\n\nC’est mieux ! On repère ainsi les clivages électoraux résumés sur le premier axe de l’AFC.\nOn peut préférer une représentation en noir et blanc :\n\n#La même carte en noir et gris\nd1&lt;-ggplot(dep2) +\n  geom_sf_inset(aes(fill = Dim1),colour=\"darkgrey\") +\n  geom_inset_frame() +\n  coord_sf_inset(inset = configure_inset(centre = inset_centre, scale = 2, units = \"mi\",\n                                         translation = c(400, 0), radius = 60))+\n  scale_fill_gradient(low=\"black\",high=\"white\")+\n  labs(fill=\"Dim.1 de l'AFC\")+\n  theme_void()\nd1\n\n\n\n\nOn a ici représenté les coordonnées du premier axe de l’AFC sur la carte. La tonalité de l’échelle des couleurs correspond ainsi à une nuance de position entre le département le plus à gauche sur l’axe 1 et le plus à droite sur l’axe 2. On aurait pu discrétiser les coordonnées et avoir ainsi des classes de département par exemple.\nEnfin, on peut vouloir vérifier la pertinence de l’AFC en projetant les résultats électoraux bruts. Par exemple, pour le score de Macron :\n\n#On calcule d'abord le pourcentage des votes en faveur de chaque candidat par departement\n##On fait une jointure avec la base du fond de carte\n\ntabprop&lt;-as.data.frame(cbind(Code=tab$Code,tab[-1]/rowSums(tab[,-1])*100))\ntabprop$Code&lt;-ifelse(nchar(tabprop$Code)==1,paste0(\"0\",tabprop$Code),tabprop$Code)\n\ndep3 &lt;- dep %&gt;% left_join(tabprop,by=c(\"CODE_DEPT\"=\"Code\"))\n\nmacron&lt;-ggplot(dep3) +\n  geom_sf_inset(aes(fill = Macron),colour=\"darkgrey\") +\n  geom_inset_frame() +\n  coord_sf_inset(inset = configure_inset(centre = inset_centre, scale = 2, units = \"mi\",\n                                         translation = c(400, 0), radius = 60))+\n  scale_fill_viridis_c(option=\"E\",direction =-1)+\n  labs(fill=\"Vote Macron\")+\n  theme_void()\nmacron\n\n\n\n\nEt de Le Pen, on voit grossièrement que les deux candidats ont des scores élevés dans des département différents.\n\nlepen&lt;-ggplot(dep3) +\n  geom_sf_inset(aes(fill = Le.Pen),colour=\"darkgrey\") +\n  geom_inset_frame() +\n  coord_sf_inset(inset = configure_inset(centre = inset_centre, scale = 2, units = \"mi\",\n                                         translation = c(400, 0), radius = 60))+\n  scale_fill_viridis_c(direction=-1)+\n  labs(fill=\"Vote Le Pen\")+\n  theme_void()\nlepen\n\n\n\n\nNote : on s’est retenu d’interpréter ici les clivages électoraux à l’échelle des départements en fonction des propriétés socio-démographiques de ces mêmes départements qui sont importants. On pourrait par exemple étendre cette analyse en ajoutant des colonnes supplémentaires avec les caractéristiques socio-démographiques supplémentaires. Pour une analyse récente de la sociologie électorale à l’échelle des communes françaises, on pourra se reporter à Cagé, J., & Piketty, T. (2023). Une histoire du conflit politique: élections et inégalités sociales en France, 1789-2022. Paris XIXe: Éditions du Seuil."
  },
  {
    "objectID": "CorrectionTD8.html",
    "href": "CorrectionTD8.html",
    "title": "TD8",
    "section": "",
    "text": "La base de données est tirée du package ade4 et présente les résultats d’une enquête menée auprès de 810 clients d’une banque. Le dictionnaire des données de la base peut être consulté ici. Cette base est celle déjà utilisée dans le TD7.\nNote : ce TD comprend une partie de questions de cours corrigées en séance.\nlibrary(readr)\n\nWarning: le package 'readr' a été compilé avec la version R 4.2.3\n\nlibrary(FactoMineR)\n\nWarning: le package 'FactoMineR' a été compilé avec la version R 4.2.3\n\nlibrary(factoextra)\n\nWarning: le package 'factoextra' a été compilé avec la version R 4.2.3\n\n\nLe chargement a nécessité le package : ggplot2\n\n\nWarning: le package 'ggplot2' a été compilé avec la version R 4.2.3\n\n\nWelcome! Want to learn more? See two factoextra-related books at https://goo.gl/ve3WBa\n\nlibrary(explor)\n\nWarning: le package 'explor' a été compilé avec la version R 4.2.3\n\nlibrary(GDAtools)\n\nWarning: le package 'GDAtools' a été compilé avec la version R 4.2.3\n\nlibrary(RColorBrewer)\n\nsetwd(\"E:/Enseignements/Cours UVSQ/Année 2023-2024/L3 Sociologie Analyse des données/TD/TD7\")\nenq&lt;-read_csv(\"TD7.csv\")\n\nRows: 810 Columns: 21\n\n\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (21): csp, duree, oppo, age, sexe, interdit, cableue, assurvi, soldevu, ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message."
  },
  {
    "objectID": "CorrectionTD8.html#réalisez-une-cah-à-partir-de-la-dernière-acm-réalisée-au-td7.",
    "href": "CorrectionTD8.html#réalisez-une-cah-à-partir-de-la-dernière-acm-réalisée-au-td7.",
    "title": "TD8",
    "section": "Réalisez une CAH à partir de la dernière ACM réalisée au TD7.",
    "text": "Réalisez une CAH à partir de la dernière ACM réalisée au TD7.\nAttention, vous paramètrerez l’analyse de telle sorte que le nombre d’axes de l’ACM retenus dans la classification correspondra au nombre d’axes de l’ACM à interpréter suivant le critère de Kaiser.\nIl est demandé de réaliser une CAH à partir des coordonnées des clients de la banque sur les axes de l’ACM réalisée au TD7. Au TD7, nous avons interprété 2 axes de l’ACM, soit le premier plan factoriel. Ici, on va spécifiquement retenir l’ensemble des axes qui ont une inertie supérieure à l’inertie moyenne (critère de Kaiser), en se disant qu’ainsi ces axes apportent une information non négligeable à la compréhension de la variabilité des clients au sein de la banque.\nPour ce faire, on refait tourner la même ACM qu’au TD7 (la deuxième, avec toutes les variables), en spécifiant les variables supplémentaires (âge, sexe, pcs) grâce à la commande quali.sup (on sait que ces variables correspondent à la première, quatrième et cinquième colonne). On ajoute l’argument ncp=16 puisqu’il y a 16 axes qui ont une contribution supérieure à la contribution moyenne (ce qu’on vérifie simplement avec la ligne de commande suivante).\n\nres.acm2&lt;-MCA(enq,quali.sup=c(1,4,5),graph=F,ncp=16)\nres.acm2$eig[,1]&gt;mean(res.acm2$eig[,1])\n\n dim 1  dim 2  dim 3  dim 4  dim 5  dim 6  dim 7  dim 8  dim 9 dim 10 dim 11 \n  TRUE   TRUE   TRUE   TRUE   TRUE   TRUE   TRUE   TRUE   TRUE   TRUE   TRUE \ndim 12 dim 13 dim 14 dim 15 dim 16 dim 17 dim 18 dim 19 dim 20 dim 21 dim 22 \n  TRUE   TRUE   TRUE   TRUE   TRUE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE \ndim 23 dim 24 dim 25 dim 26 dim 27 dim 28 dim 29 dim 30 dim 31 dim 32 dim 33 \n FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE  FALSE \ndim 34 dim 35 dim 36 dim 37 dim 38 dim 39 \n FALSE  FALSE  FALSE  FALSE  FALSE  FALSE \n\n\nOn peut ensuite réaliser la CAH, à l’aide de la fonction HCPC du package FactoMineR. L’argument principal est l’objet res.acm2, résultat de l’ACM. On indique nb.clust=-1, ce qui signifie qu’on laisse l’algorithme déterminer lui-même le nombre de classes optimales dans l’analyse. Le critère d’optimisation correspond à la minimisation du gain d’inertie relatif entre deux partitions possibles.\nOn a aussi spécifié à la fonction de ne pas “consolider” les classes de la partition (consol=F) une fois la CAH réalisée. Il s’agit d’une modification de l’algorithme par la méthode de classification des k-means qui cherche a posteriori de la CAH à optimiser les individus dans chacune des classes mais l’inconvénient est que les partitions ne sont alors plus emboitées les unes par rapport aux autres.\n\n##Realiser une CAH sur les axes de l'ACM où l'algorithme optimise \n#automatiquement le choix de la partition\nres.hcpc1&lt;-HCPC(res.acm2,nb.clust=-1,consol=F,graph=F)\n\nOn peut d’ailleurs “manuellement” vérifier ce gain d’inertie inter-classe relatif de la manière suivante :\n\n#Gain d'inertie inter de 1 à 2, de 2 à 3 etc...\ninert.gain&lt;-res.hcpc1$call$t$inert.gain[1:10]\nprev_inert.gain&lt;- dplyr::lag(inert.gain)\n#Calcul du gain d'inertie relatif où Delta(k)=gain d'inertie entre classe k et k-1\nGain.inert.relatif&lt;-inert.gain/prev_inert.gain\nnames(Gain.inert.relatif)&lt;-c(\"-\",\"Delta(3)/Delta(4)\",\"Delta(4)/Delta(5)\",\"Delta(5)/Delta(6)\",\"Delta(6)/Delta(7)\",\"Delta(7)/Delta(8)\",\"Delta(8)/Delta(9)\",\"Delta(9)/Delta(10)\",\"Delta(10)/Delta(11)\",\"Delta(11)/Delta(12)\")\nGain.inert.relatif\n\n                  -   Delta(3)/Delta(4)   Delta(4)/Delta(5)   Delta(5)/Delta(6) \n                 NA           0.4644266           0.8968069           0.8715325 \n  Delta(6)/Delta(7)   Delta(7)/Delta(8)   Delta(8)/Delta(9)  Delta(9)/Delta(10) \n          0.7793780           0.9720042           0.9627191           0.9229216 \nDelta(10)/Delta(11) Delta(11)/Delta(12) \n          0.9613804           0.9311210 \n\ndata.frame(Gain.inert.relatif)\n\n                    Gain.inert.relatif\n-                                   NA\nDelta(3)/Delta(4)            0.4644266\nDelta(4)/Delta(5)            0.8968069\nDelta(5)/Delta(6)            0.8715325\nDelta(6)/Delta(7)            0.7793780\nDelta(7)/Delta(8)            0.9720042\nDelta(8)/Delta(9)            0.9627191\nDelta(9)/Delta(10)           0.9229216\nDelta(10)/Delta(11)          0.9613804\nDelta(11)/Delta(12)          0.9311210\n\n#la minimisation de ce rapport nous indique bien de conserver trois classes.\n\nLa représentation du dendrogramme et du diagramme du gain (absolu) d’inertie inter-classe entre deux partitions est intéressante. En suivant plutôt un critère visuel où on couperait le dendrogramme là où les branches sont les plus longues et en appliquant un “critère du coude” au diagramme à barre, on retiendrait plutôt cinq classes que trois.\n\n#Représentation coloriée du dendogramme\ncols = brewer.pal(n=3, \"Set2\")\np_dend&lt;-fviz_dend(res.hcpc1,k_colors = cols, show_labels = F )\n\nWarning: The `&lt;scale&gt;` argument of `guides()` cannot be `FALSE`. Use \"none\" instead as\nof ggplot2 3.3.4.\nℹ The deprecated feature was likely used in the factoextra package.\n  Please report the issue at &lt;https://github.com/kassambara/factoextra/issues&gt;.\n\np_dend\n\n\n\n#Représentation des gains (absolus) d'inertie entre les partitions successives\nplot.HCPC(res.hcpc1,choice=\"bar\")\n\n\n\n\nAnalysons d’abord les trois classes avant de regarder comment se configurent la partition en cinq classes."
  },
  {
    "objectID": "CorrectionTD8.html#commentez-la-projection-des-classes-sur-le-premier-plan-factoriel-en-fonction-de-son-interprétation-au-td7.",
    "href": "CorrectionTD8.html#commentez-la-projection-des-classes-sur-le-premier-plan-factoriel-en-fonction-de-son-interprétation-au-td7.",
    "title": "TD8",
    "section": "Commentez la projection des classes sur le premier plan factoriel en fonction de son interprétation au TD7.",
    "text": "Commentez la projection des classes sur le premier plan factoriel en fonction de son interprétation au TD7.\nLa classe 1 est la plus à gauche sur l’axe 1 et correspond ainsi aux clients dont les pratiques bancaires sont peu intenses. La classe 2 est en haut de l’axe 2, a priori il s’agit des clients épargnants âgés. La classe 3 est plutôt en bas de l’axe 2, il s’agit a priori des clients emprunteurs plus jeunes.\n\n##Représentation des classes sur le premier plan factoriel\n##Pour avoir les mêmes couleurs que sur le dendogramme il faut faire un peu de code...\nclust&lt;- cutree(res.hcpc1$call$t$tree,k=3)\ndend = attributes(p_dend)$dendrogram\ntree_order &lt;- order.dendrogram(dend)\nclust = factor(clust, levels = unique(clust[tree_order]))\nnames(cols) = unique(clust[tree_order])\n\n  fviz_cluster(res.hcpc1, show.clust.cent = TRUE)+\n  scale_colour_manual(values = cols) +\n  scale_fill_manual(values = cols) + \n  geom_hline(yintercept=0,alpha=.4)+geom_vline(xintercept = 0,alpha=.4)+\n  theme_minimal()\n\n\n\n\nNote : chaque individu (client) est alloué à une classe et une seule. Cependant, les classes se superposent en partie sur le premier plan factoriel car on a utilisé les coordonnées des clients sur les 16 premiers axes de l’ACM ce qui signifie que l’allocation des individus aux classes ne dépend pas seulement des critères de différenciation sur le premier plan factoriel. Si on choisissait de réaliser la CAH sur les deux premiers axes seulement (ncp=2 dans la fonction MCA), on aurait une représentation graphique où les classes se superposeraient beaucoup moins."
  },
  {
    "objectID": "CorrectionTD8.html#décrivez-et-interprétez-les-classes-obtenues-en-fonction-des-variables-actives-et-supplémentaires-de-lacm-utiliser-desc.var-.-nommez-ces-classes.",
    "href": "CorrectionTD8.html#décrivez-et-interprétez-les-classes-obtenues-en-fonction-des-variables-actives-et-supplémentaires-de-lacm-utiliser-desc.var-.-nommez-ces-classes.",
    "title": "TD8",
    "section": "Décrivez et interprétez les classes obtenues en fonction des variables actives et supplémentaires de l’ACM (utiliser « desc.var »). Nommez ces classes.",
    "text": "Décrivez et interprétez les classes obtenues en fonction des variables actives et supplémentaires de l’ACM (utiliser « desc.var »). Nommez ces classes.\nRésumons rapidement à quoi correspondent les classes de clients (les “segments de clientèle” de la banque) à l’aide des fonctions ci-dessous (la description est brève et doit être approfondie) :\n\nLa classe 1 (42% des clients) est la plus à gauche sur l’axe 1 (activités bancaires peu intenses). Elle est de ce fait caractérisée par des clients qui n’ont pas d’activité bancaire et ont un solde de compte courant faible ou négatif. Près des deux tiers des clients de cette classe ont moins de 25 ans.\nLa classe 2 (15%) est en haut sur l’axe 2, il s’agit de la classe des épargnants, clients âgés et retraités.\nLa classe 3 (42%) est en bas sur l’axe 2, il s’agit de la classe des emprunteurs et des gens qui ont beaucoup de mouvements bancaires.  \n\nEn précisant la description de ces classes, on pourrait les nommer, ce qui permettrait de résumer ainsi à quel segment de clientèle on a affaire.\n\n##Distribution des classes\nprop.table(table(res.hcpc1$data.clust$clust))*100\n\n\n       1        2        3 \n41.85185 15.80247 42.34568 \n\n##Description des classes en fonction des variables\nres.hcpc1$desc.var\n\n\nLink between the cluster variable and the categorical variables (chi-square test)\n=================================================================================\n              p.value df\neparliv  3.267409e-58  4\nporttit  1.078894e-48  6\nvirecre  2.385928e-48  6\nsoldevu  3.136331e-47 10\nviredeb  3.211635e-40  6\nremiche  2.058648e-39  6\ncableue  1.069292e-28  2\nprelfin  2.358361e-23  4\nretresp  1.090613e-20  4\nduree    8.847266e-20  8\neparlog  1.996980e-16  4\nversesp  4.031103e-15  2\npreltre  1.224341e-14  4\nage      4.204076e-13  8\nassurvi  2.786729e-12  2\ninterdit 3.647041e-10  2\ncsp      7.594153e-08 16\ncredcon  1.095899e-07  4\noppo     3.288758e-06  2\ncredhab  3.075719e-02  2\n\nDescription of each cluster by the categories\n=============================================\n$`1`\n                        Cla/Mod    Mod/Cla    Global      p.value    v.test\nvirecre=virecre_nul   63.613861 75.8112094 49.876543 3.793487e-37 12.734690\nviredeb=viredeb_nul   57.319588 82.0058997 59.876543 5.721160e-29 11.169952\neparliv=eparliv_nul   51.607717 94.6902655 76.790123 7.228295e-28 10.942373\nremiche=remiche_nul   57.683742 76.4011799 55.432099 4.436515e-25 10.344408\neparlog=eparlog_nul   47.293447 97.9351032 86.666667 1.864539e-18  8.765195\ncableue=cableue_non   51.499118 86.1356932 70.000000 2.192589e-18  8.746918\nsoldevu=p1            61.254613 48.9675516 33.456790 2.576999e-15  7.909850\nprelfin=prelfin_nul   46.534653 97.0501475 87.283951 2.818728e-14  7.606383\npreltre=preltre_nul   45.879121 98.5250737 89.876543 2.829590e-14  7.605886\nporttit=porttit_nul   48.571429 90.2654867 77.777778 5.973706e-14  7.508657\nduree=dm2             76.923077 20.6489676 11.234568 6.728232e-13  7.184847\nassurvi=assurvi_non   46.735905 92.9203540 83.209877 7.046114e-11  6.519672\ninterdit=interdit_oui 81.034483 13.8643068  7.160494 3.284253e-10  6.284729\nsoldevu=n1            62.962963 30.0884956 20.000000 1.574441e-09  6.036550\nretresp=retresp_fai   45.506419 94.1002950 86.543210 2.898272e-08  5.547473\nversesp=versesp_non   44.951591 95.8702065 89.259259 7.117002e-08  5.388192\noppo=oppo_non         44.015957 97.6401180 92.839506 2.253182e-06  4.729279\nage=ai25              63.333333 16.8141593 11.111111 1.512679e-05  4.326834\nduree=d24             58.333333 22.7138643 16.296296 3.325648e-05  4.149938\ncredcon=credcon_nul   44.379562 89.6755162 84.567901 5.461007e-04  3.457061\ncredhab=credhab_non   43.454039 92.0353982 88.641975 9.203569e-03  2.604398\ncsp=etudi             56.140351  9.4395280  7.037037 2.559228e-02  2.232343\ncsp=retra             26.923077  4.1297935  6.419753 2.294322e-02 -2.274379\ncredhab=credhab_oui   29.347826  7.9646018 11.358025 9.203569e-03 -2.604398\nvirecre=virecre_fai   31.609195 16.2241888 21.481481 1.863098e-03 -3.111230\nretresp=retresp_moy   25.000000  5.6047198  9.382716 1.463917e-03 -3.181743\nage=ai75              31.460674 16.5191740 21.975309 1.358830e-03 -3.203256\ncredcon=credcon_fai   23.529412  4.7197640  8.395062 1.099304e-03 -3.263796\nremiche=remiche_fai   30.454545 19.7640118 27.160494 5.180643e-05 -4.047324\nviredeb=viredeb_for   12.500000  1.4749263  4.938272 4.862847e-05 -4.062123\noppo=oppo_oui         13.793103  2.3598820  7.160494 2.253182e-06 -4.729279\nprelfin=prelfin_moy   12.500000  2.0648968  6.913580 1.058556e-06 -4.880429\nporttit=porttit_for   10.000000  1.4749263  6.172840 4.680593e-07 -5.038964\nretresp=retresp_for    3.030303  0.2949853  4.074074 2.865850e-07 -5.132062\npreltre=preltre_fai    8.510638  1.1799410  5.802469 2.724861e-07 -5.141547\nremiche=remiche_moy   14.285714  2.9498525  8.641975 2.705649e-07 -5.142876\npreltre=preltre_moy    2.857143  0.2949853  4.320988 9.649779e-08 -5.333198\nversesp=versesp_oui   16.091954  4.1297935 10.740741 7.117002e-08 -5.388192\nviredeb=viredeb_moy    4.878049  0.5899705  5.061728 5.903672e-08 -5.421694\nprelfin=prelfin_fai    6.382979  0.8849558  5.802469 2.969405e-08 -5.543231\neparlog=eparlog_fai    4.545455  0.5899705  5.432099 1.192803e-08 -5.700752\nsoldevu=p2            20.000000  8.5545723 17.901235 1.245157e-09 -6.074318\neparlog=eparlog_for    7.812500  1.4749263  7.901235 4.322270e-10 -6.241922\ninterdit=interdit_non 38.829787 86.1356932 92.839506 3.284253e-10 -6.284729\nvirecre=virecre_moy   15.789474  5.3097345 14.074074 1.914590e-10 -6.368040\nassurvi=assurvi_oui   17.647059  7.0796460 16.790123 7.046114e-11 -6.519672\neparliv=eparliv_for    0.000000  0.0000000  5.432099 1.801689e-11 -6.721253\nduree=dp12            22.457627 15.6342183 29.135802 2.273739e-13 -7.331628\nremiche=remiche_for    4.225352  0.8849558  8.765432 6.535458e-14 -7.496880\nviredeb=viredeb_fai   22.131148 15.9292035 30.123457 2.240231e-14 -7.636029\nporttit=porttit_fai    2.898551  0.5899705  8.518519 1.045236e-14 -7.733629\nsoldevu=p3             2.898551  0.5899705  8.518519 1.045236e-14 -7.733629\nsoldevu=p4             6.315789  1.7699115 11.728395 2.460870e-16 -8.197182\neparliv=eparliv_fai   12.500000  5.3097345 17.777778 7.706980e-17 -8.335656\ncableue=cableue_oui   19.341564 13.8643068 30.000000 2.192589e-18 -8.746918\nvirecre=virecre_for    7.627119  2.6548673 14.567901 8.056829e-19 -8.859231\n\n$`2`\n                      Cla/Mod   Mod/Cla    Global      p.value     v.test\neparliv=eparliv_for 88.636364  30.46875  5.432099 1.331199e-28  11.094691\nporttit=porttit_fai 60.869565  32.81250  8.518519 1.647562e-19   9.034498\nporttit=porttit_for 64.000000  25.00000  6.172840 1.176378e-15   8.006898\nretresp=retresp_for 69.696970  17.96875  4.074074 1.550947e-12   7.069856\nage=ai75            33.707865  46.87500 21.975309 5.547302e-12   6.890817\nsoldevu=p4          43.157895  32.03125 11.728395 6.579101e-12   6.866511\nprelfin=prelfin_nul 18.104668 100.00000 87.283951 5.281199e-09   5.838060\ncsp=retra           42.307692  17.18750  6.419753 2.288439e-06   4.726126\nversesp=versesp_non 17.565698  99.21875 89.259259 2.559039e-06   4.703369\nremiche=remiche_for 36.619718  20.31250  8.765432 6.715102e-06   4.502524\ncableue=cableue_non 19.047619  84.37500 70.000000 5.538654e-05   4.031650\ncredcon=credcon_nul 17.664234  94.53125 84.567901 2.231386e-04   3.691268\nviredeb=viredeb_nul 18.969072  71.87500 59.876543 2.264069e-03   3.053211\neparlog=eparlog_for 29.687500  14.84375  7.901235 3.515297e-03   2.918669\nremiche=remiche_nul 18.262806  64.06250 55.432099 3.210404e-02   2.143113\npreltre=preltre_nul 16.620879  94.53125 89.876543 4.858380e-02   1.972226\ncsp=etudi            7.017544   3.12500  7.037037 4.846489e-02  -1.973269\neparliv=eparliv_fai 10.416667  11.71875 17.777778 4.550477e-02  -1.999958\ncredcon=credcon_for  5.263158   2.34375  7.037037 1.498155e-02  -2.432825\nretresp=retresp_moy  6.578947   3.90625  9.382716 1.382446e-02  -2.461792\ncredcon=credcon_fai  5.882353   3.12500  8.395062 1.208602e-02  -2.509623\nage=ai25             6.666667   4.68750 11.111111 7.242312e-03  -2.685492\nvirecre=virecre_for  7.627119   7.03125 14.567901 5.429543e-03  -2.780379\nretresp=retresp_fai 14.265335  78.12500 86.543210 4.104353e-03  -2.870028\nviredeb=viredeb_for  0.000000   0.00000  4.938272 8.522659e-04  -3.335237\nviredeb=viredeb_moy  0.000000   0.00000  5.061728 7.105906e-04  -3.385460\nage=ai35             7.051282   8.59375 19.259259 3.896943e-04  -3.546966\nremiche=remiche_fai  8.636364  14.84375 27.160494 3.801939e-04  -3.553464\ncsp=emplo            6.622517   7.81250 18.641975 2.450588e-04  -3.667369\nprelfin=prelfin_fai  0.000000   0.00000  5.802469 2.374155e-04  -3.675466\ncableue=cableue_oui  8.230453  15.62500 30.000000 5.538654e-05  -4.031650\nremiche=remiche_moy  1.428571   0.78125  8.641975 5.396493e-05  -4.037756\nsoldevu=n1           6.172840   7.81250 20.000000 5.350771e-05  -4.039752\nprelfin=prelfin_moy  0.000000   0.00000  6.913580 4.503884e-05  -4.079984\nversesp=versesp_oui  1.149425   0.78125 10.740741 2.559039e-06  -4.703369\neparliv=eparliv_nul 11.897106  57.81250 76.790123 1.662908e-07  -5.233544\nporttit=porttit_nul  7.619048  37.50000 77.777778 8.902559e-28 -10.923473\n\n$`3`\n                        Cla/Mod    Mod/Cla    Global      p.value     v.test\ncableue=cableue_oui   72.427984 51.3119534 30.000000 5.248683e-30  11.380187\nvirecre=virecre_for   84.745763 29.1545190 14.567901 1.327962e-24  10.238857\neparliv=eparliv_fai   77.083333 32.3615160 17.777778 1.067132e-20   9.329160\nversesp=versesp_oui   82.758621 20.9912536 10.740741 3.661708e-16   8.149256\nviredeb=viredeb_fai   63.114754 44.8979592 30.123457 5.097398e-15   7.824485\nsoldevu=p3            85.507246 17.2011662  8.518519 1.451825e-14   7.691709\nprelfin=prelfin_fai   93.617021 12.8279883  5.802469 2.786241e-14   7.607882\nremiche=remiche_moy   84.285714 17.2011662  8.641975 5.819044e-14   7.512091\nviredeb=viredeb_moy   95.121951 11.3702624  5.061728 2.397153e-13   7.324542\nprelfin=prelfin_moy   87.500000 14.2857143  6.913580 5.525068e-13   7.211717\nassurvi=assurvi_oui   69.852941 27.6967930 16.790123 1.447522e-12   7.079427\ninterdit=interdit_non 45.212766 99.1253644 92.839506 5.453213e-11   6.558006\neparlog=eparlog_fai   88.636364 11.3702624  5.432099 7.716028e-11   6.506035\nremiche=remiche_fai   60.909091 39.0670554 27.160494 8.567567e-11   6.490282\nsoldevu=p2            65.517241 27.6967930 17.901235 6.211701e-10   6.184963\npreltre=preltre_fai   85.106383 11.6618076  5.802469 6.858052e-10   6.169329\nviredeb=viredeb_for   87.500000 10.2040816  4.938272 1.884924e-09   6.007425\nduree=dp12            58.474576 40.2332362 29.135802 3.181898e-09   5.921928\npreltre=preltre_moy   85.714286  8.7463557  4.320988 9.107935e-08   5.343678\nvirecre=virecre_moy   64.035088 21.2827988 14.074074 5.537188e-07   5.006697\ncredcon=credcon_fai   70.588235 13.9941691  8.395062 1.069943e-06   4.878318\nretresp=retresp_moy   68.421053 15.1603499  9.382716 1.720744e-06   4.783727\noppo=oppo_oui         72.413793 12.2448980  7.160494 1.879231e-06   4.765996\nvirecre=virecre_fai   55.747126 28.2798834 21.481481 6.241150e-05   4.003503\neparlog=eparlog_for   62.500000 11.6618076  7.901235 8.014627e-04   3.352289\ncredcon=credcon_for   61.403509 10.2040816  7.037037 2.937668e-03   2.974186\nremiche=remiche_for   59.154930 12.2448980  8.765432 3.077573e-03   2.959882\ncsp=emplo             52.980132 23.3236152 18.641975 3.653617e-03   2.906616\ncsp=ouvri             50.273224 26.8221574 22.592593 1.429407e-02   2.449787\ncredhab=credhab_oui   53.260870 14.2857143 11.358025 2.603515e-02   2.225687\ncredhab=credhab_non   40.947075 85.7142857 88.641975 2.603515e-02  -2.225687\ncsp=cadsu             32.038835  9.6209913 12.716049 2.283850e-02  -2.276126\nage=ai75              34.831461 18.0758017 21.975309 2.132954e-02  -2.302100\nporttit=porttit_for   26.000000  3.7900875  6.172840 1.470979e-02  -2.439446\nage=ai25              30.000000  7.8717201 11.111111 1.131658e-02  -2.532768\nretresp=retresp_fai   40.228245 82.2157434 86.543210 2.219737e-03  -3.059140\nsoldevu=n1            30.864198 14.5772595 20.000000 8.588605e-04  -3.333094\nduree=d24             25.757576  9.9125364 16.296296 1.787749e-05  -4.289873\neparliv=eparliv_for   11.363636  1.4577259  5.432099 5.890782e-06  -4.530272\noppo=oppo_non         40.026596 87.7551020 92.839506 1.879231e-06  -4.765996\ncredcon=credcon_nul   37.956204 75.8017493 84.567901 4.341787e-09  -5.870616\neparliv=eparliv_nul   36.495177 66.1807580 76.790123 1.160141e-09  -6.085658\ninterdit=interdit_oui  5.172414  0.8746356  7.160494 5.453213e-11  -6.558006\neparlog=eparlog_nul   37.606838 76.9679300 86.666667 4.138194e-12  -6.932380\nassurvi=assurvi_non   36.795252 72.3032070 83.209877 1.447522e-12  -7.079427\nduree=dm2              9.890110  2.6239067 11.234568 9.578119e-13  -7.136437\nsoldevu=p1            23.985240 18.9504373 33.456790 2.388231e-14  -7.627784\nversesp=versesp_non   37.482711 79.0087464 89.259259 3.661708e-16  -8.149256\npreltre=preltre_nul   37.500000 79.5918367 89.876543 3.203062e-17  -8.438912\nprelfin=prelfin_nul   35.360679 72.8862974 87.283951 1.751963e-27 -10.861833\ncableue=cableue_non   29.453263 48.6880466 70.000000 5.248683e-30 -11.380187\nremiche=remiche_nul   24.053452 31.4868805 55.432099 1.895268e-32 -11.860637\nviredeb=viredeb_nul   23.711340 33.5276968 59.876543 4.836884e-40 -13.244781\nvirecre=virecre_nul   18.069307 21.2827988 49.876543 4.037576e-46 -14.257303\n\n#cla/mod indique quelle part (pourcentage) de tous les individus présentant cette modalité se retrouve dans cette classe\n#mod/cla indique quelle part (pourcentage) de tous les individus de la classe présentent cette modalité.\n#Global indique quelle part de tous les individus quel que soit leur classe présentent cette modalité\n#p-value indique la probabilité au seuil duquel on rejette H0 (pas de lien entre modalité et classe)\n#v-test est la valeur du test (si var qualitative c'est test de Fisher), plus elle est grande positivement, plus la modalité est associée à la classe\n#Plus elle est petite négativement, plus la modalité est rare dans la classe"
  },
  {
    "objectID": "CorrectionTD8.html#en-inspectant-le-dendrogramme-et-lhistogramme-des-gains-dinertie-interclasses-entre-deux-partitions-successives-vous-justifierez-de-la-possibilité-détudier-une-autre-partition-à-partir-de-cette-même-cah.",
    "href": "CorrectionTD8.html#en-inspectant-le-dendrogramme-et-lhistogramme-des-gains-dinertie-interclasses-entre-deux-partitions-successives-vous-justifierez-de-la-possibilité-détudier-une-autre-partition-à-partir-de-cette-même-cah.",
    "title": "TD8",
    "section": "En inspectant le dendrogramme et l’histogramme des gains d’inertie interclasses entre deux partitions successives, vous justifierez de la possibilité d’étudier une autre partition à partir de cette même CAH.",
    "text": "En inspectant le dendrogramme et l’histogramme des gains d’inertie interclasses entre deux partitions successives, vous justifierez de la possibilité d’étudier une autre partition à partir de cette même CAH.\nOn a plus haut donné les pistes permettant d’étudier plutôt la partition en cinq classes en suivant le critère du coude sur le diagramme de représentation des gains d’inertie inter-classe absolus.\n\n##Réalisation d'une CAH avec partition où nbr de classes = 5\nres.hcpc2&lt;-HCPC(res.acm2,nb.clust=5,consol=F,graph=F)\n\nOn peut regarder le dendrogramme et de nouveau le diagramme à barres :\n\n#Représentation coloriée du dendogramme\ncols = brewer.pal(n=5, \"Set2\")\np_dend&lt;-fviz_dend(res.hcpc2,k_colors = cols, show_labels = F )\np_dend\n\n\n\nplot.HCPC(res.hcpc2,choice=\"bar\")\n\n\n\n\nLa représentation des cinq classes sur le premier plan factoriel :\n\n##Représentation des classes sur le premier plan factoriel\n##Pour avoir les mêmes couleurs que sur le dendogramme il faut faire un peu de code...\nclust&lt;- cutree(res.hcpc2$call$t$tree,k=5)\ndend = attributes(p_dend)$dendrogram\ntree_order &lt;- order.dendrogram(dend)\nclust = factor(clust, levels = unique(clust[tree_order]))\nnames(cols) = unique(clust[tree_order])\n\nfviz_cluster(res.hcpc2, show.clust.cent = TRUE)+\n  scale_colour_manual(values = cols) +\n  scale_fill_manual(values = cols) + \n  geom_hline(yintercept=0,alpha=.4)+geom_vline(xintercept = 0,alpha=.4)+\n  theme_minimal()"
  },
  {
    "objectID": "CorrectionTD8.html#décrivez-cette-autre-partition-à-quel-emboitement-par-rapport-à-la-partition-précédente-correspond-elle-décrivez-cette-nouvelle-partition-en-fonction-des-variables-de-lacm-et-nommez-les-classes-obtenues.",
    "href": "CorrectionTD8.html#décrivez-cette-autre-partition-à-quel-emboitement-par-rapport-à-la-partition-précédente-correspond-elle-décrivez-cette-nouvelle-partition-en-fonction-des-variables-de-lacm-et-nommez-les-classes-obtenues.",
    "title": "TD8",
    "section": "Décrivez cette autre partition : à quel emboitement par rapport à la partition précédente correspond-elle ? Décrivez cette nouvelle partition en fonction des variables de l’ACM et nommez les classes obtenues.",
    "text": "Décrivez cette autre partition : à quel emboitement par rapport à la partition précédente correspond-elle ? Décrivez cette nouvelle partition en fonction des variables de l’ACM et nommez les classes obtenues.\nEn comparant les deux dendrogrammes, on voit déjà que c’est la classe 3 qui a été divisée en trois par rapport à la partition en trois classes.\nLes commandes ci-dessous sur la distribution des classes dans la population de la clientèle et de description des classes permettent de préciser la logique de chacun de ces segments.\n\n##Distribution des classes\nprop.table(table(res.hcpc2$data.clust$clust))*100\n\n\n       1        2        3        4        5 \n41.85185 15.80247 20.37037 10.61728 11.35802 \n\n##Description des classes en fonction des variables\nres.hcpc2$desc.var\n\n\nLink between the cluster variable and the categorical variables (chi-square test)\n=================================================================================\n              p.value df\nviredeb  1.933310e-82 12\nvirecre  2.239714e-79 12\nprelfin  1.070718e-62  8\neparliv  6.162405e-57  8\nsoldevu  2.185747e-55 20\nremiche  2.774285e-52 12\nporttit  3.698753e-46 12\npreltre  2.630883e-43  8\ncableue  1.225282e-27  4\nretresp  4.518774e-26  8\nduree    1.802288e-24 16\ncredcon  3.782813e-23  8\nversesp  1.221047e-20  4\neparlog  4.128794e-17  8\nage      3.287073e-16 16\nassurvi  2.562329e-15  4\ncredhab  4.942544e-11  4\ninterdit 6.860063e-09  4\ncsp      1.527806e-07 32\noppo     1.546914e-07  4\nsexe     2.382573e-04  4\n\nDescription of each cluster by the categories\n=============================================\n$`1`\n                        Cla/Mod    Mod/Cla    Global      p.value    v.test\nvirecre=virecre_nul   63.613861 75.8112094 49.876543 3.793487e-37 12.734690\nviredeb=viredeb_nul   57.319588 82.0058997 59.876543 5.721160e-29 11.169952\neparliv=eparliv_nul   51.607717 94.6902655 76.790123 7.228295e-28 10.942373\nremiche=remiche_nul   57.683742 76.4011799 55.432099 4.436515e-25 10.344408\neparlog=eparlog_nul   47.293447 97.9351032 86.666667 1.864539e-18  8.765195\ncableue=cableue_non   51.499118 86.1356932 70.000000 2.192589e-18  8.746918\nsoldevu=p1            61.254613 48.9675516 33.456790 2.576999e-15  7.909850\nprelfin=prelfin_nul   46.534653 97.0501475 87.283951 2.818728e-14  7.606383\npreltre=preltre_nul   45.879121 98.5250737 89.876543 2.829590e-14  7.605886\nporttit=porttit_nul   48.571429 90.2654867 77.777778 5.973706e-14  7.508657\nduree=dm2             76.923077 20.6489676 11.234568 6.728232e-13  7.184847\nassurvi=assurvi_non   46.735905 92.9203540 83.209877 7.046114e-11  6.519672\ninterdit=interdit_oui 81.034483 13.8643068  7.160494 3.284253e-10  6.284729\nsoldevu=n1            62.962963 30.0884956 20.000000 1.574441e-09  6.036550\nretresp=retresp_fai   45.506419 94.1002950 86.543210 2.898272e-08  5.547473\nversesp=versesp_non   44.951591 95.8702065 89.259259 7.117002e-08  5.388192\noppo=oppo_non         44.015957 97.6401180 92.839506 2.253182e-06  4.729279\nage=ai25              63.333333 16.8141593 11.111111 1.512679e-05  4.326834\nduree=d24             58.333333 22.7138643 16.296296 3.325648e-05  4.149938\ncredcon=credcon_nul   44.379562 89.6755162 84.567901 5.461007e-04  3.457061\ncredhab=credhab_non   43.454039 92.0353982 88.641975 9.203569e-03  2.604398\ncsp=etudi             56.140351  9.4395280  7.037037 2.559228e-02  2.232343\ncsp=retra             26.923077  4.1297935  6.419753 2.294322e-02 -2.274379\ncredhab=credhab_oui   29.347826  7.9646018 11.358025 9.203569e-03 -2.604398\nvirecre=virecre_fai   31.609195 16.2241888 21.481481 1.863098e-03 -3.111230\nretresp=retresp_moy   25.000000  5.6047198  9.382716 1.463917e-03 -3.181743\nage=ai75              31.460674 16.5191740 21.975309 1.358830e-03 -3.203256\ncredcon=credcon_fai   23.529412  4.7197640  8.395062 1.099304e-03 -3.263796\nremiche=remiche_fai   30.454545 19.7640118 27.160494 5.180643e-05 -4.047324\nviredeb=viredeb_for   12.500000  1.4749263  4.938272 4.862847e-05 -4.062123\noppo=oppo_oui         13.793103  2.3598820  7.160494 2.253182e-06 -4.729279\nprelfin=prelfin_moy   12.500000  2.0648968  6.913580 1.058556e-06 -4.880429\nporttit=porttit_for   10.000000  1.4749263  6.172840 4.680593e-07 -5.038964\nretresp=retresp_for    3.030303  0.2949853  4.074074 2.865850e-07 -5.132062\npreltre=preltre_fai    8.510638  1.1799410  5.802469 2.724861e-07 -5.141547\nremiche=remiche_moy   14.285714  2.9498525  8.641975 2.705649e-07 -5.142876\npreltre=preltre_moy    2.857143  0.2949853  4.320988 9.649779e-08 -5.333198\nversesp=versesp_oui   16.091954  4.1297935 10.740741 7.117002e-08 -5.388192\nviredeb=viredeb_moy    4.878049  0.5899705  5.061728 5.903672e-08 -5.421694\nprelfin=prelfin_fai    6.382979  0.8849558  5.802469 2.969405e-08 -5.543231\neparlog=eparlog_fai    4.545455  0.5899705  5.432099 1.192803e-08 -5.700752\nsoldevu=p2            20.000000  8.5545723 17.901235 1.245157e-09 -6.074318\neparlog=eparlog_for    7.812500  1.4749263  7.901235 4.322270e-10 -6.241922\ninterdit=interdit_non 38.829787 86.1356932 92.839506 3.284253e-10 -6.284729\nvirecre=virecre_moy   15.789474  5.3097345 14.074074 1.914590e-10 -6.368040\nassurvi=assurvi_oui   17.647059  7.0796460 16.790123 7.046114e-11 -6.519672\neparliv=eparliv_for    0.000000  0.0000000  5.432099 1.801689e-11 -6.721253\nduree=dp12            22.457627 15.6342183 29.135802 2.273739e-13 -7.331628\nremiche=remiche_for    4.225352  0.8849558  8.765432 6.535458e-14 -7.496880\nviredeb=viredeb_fai   22.131148 15.9292035 30.123457 2.240231e-14 -7.636029\nporttit=porttit_fai    2.898551  0.5899705  8.518519 1.045236e-14 -7.733629\nsoldevu=p3             2.898551  0.5899705  8.518519 1.045236e-14 -7.733629\nsoldevu=p4             6.315789  1.7699115 11.728395 2.460870e-16 -8.197182\neparliv=eparliv_fai   12.500000  5.3097345 17.777778 7.706980e-17 -8.335656\ncableue=cableue_oui   19.341564 13.8643068 30.000000 2.192589e-18 -8.746918\nvirecre=virecre_for    7.627119  2.6548673 14.567901 8.056829e-19 -8.859231\n\n$`2`\n                      Cla/Mod   Mod/Cla    Global      p.value     v.test\neparliv=eparliv_for 88.636364  30.46875  5.432099 1.331199e-28  11.094691\nporttit=porttit_fai 60.869565  32.81250  8.518519 1.647562e-19   9.034498\nporttit=porttit_for 64.000000  25.00000  6.172840 1.176378e-15   8.006898\nretresp=retresp_for 69.696970  17.96875  4.074074 1.550947e-12   7.069856\nage=ai75            33.707865  46.87500 21.975309 5.547302e-12   6.890817\nsoldevu=p4          43.157895  32.03125 11.728395 6.579101e-12   6.866511\nprelfin=prelfin_nul 18.104668 100.00000 87.283951 5.281199e-09   5.838060\ncsp=retra           42.307692  17.18750  6.419753 2.288439e-06   4.726126\nversesp=versesp_non 17.565698  99.21875 89.259259 2.559039e-06   4.703369\nremiche=remiche_for 36.619718  20.31250  8.765432 6.715102e-06   4.502524\ncableue=cableue_non 19.047619  84.37500 70.000000 5.538654e-05   4.031650\ncredcon=credcon_nul 17.664234  94.53125 84.567901 2.231386e-04   3.691268\nviredeb=viredeb_nul 18.969072  71.87500 59.876543 2.264069e-03   3.053211\neparlog=eparlog_for 29.687500  14.84375  7.901235 3.515297e-03   2.918669\nremiche=remiche_nul 18.262806  64.06250 55.432099 3.210404e-02   2.143113\npreltre=preltre_nul 16.620879  94.53125 89.876543 4.858380e-02   1.972226\ncsp=etudi            7.017544   3.12500  7.037037 4.846489e-02  -1.973269\neparliv=eparliv_fai 10.416667  11.71875 17.777778 4.550477e-02  -1.999958\ncredcon=credcon_for  5.263158   2.34375  7.037037 1.498155e-02  -2.432825\nretresp=retresp_moy  6.578947   3.90625  9.382716 1.382446e-02  -2.461792\ncredcon=credcon_fai  5.882353   3.12500  8.395062 1.208602e-02  -2.509623\nage=ai25             6.666667   4.68750 11.111111 7.242312e-03  -2.685492\nvirecre=virecre_for  7.627119   7.03125 14.567901 5.429543e-03  -2.780379\nretresp=retresp_fai 14.265335  78.12500 86.543210 4.104353e-03  -2.870028\nviredeb=viredeb_for  0.000000   0.00000  4.938272 8.522659e-04  -3.335237\nviredeb=viredeb_moy  0.000000   0.00000  5.061728 7.105906e-04  -3.385460\nage=ai35             7.051282   8.59375 19.259259 3.896943e-04  -3.546966\nremiche=remiche_fai  8.636364  14.84375 27.160494 3.801939e-04  -3.553464\ncsp=emplo            6.622517   7.81250 18.641975 2.450588e-04  -3.667369\nprelfin=prelfin_fai  0.000000   0.00000  5.802469 2.374155e-04  -3.675466\ncableue=cableue_oui  8.230453  15.62500 30.000000 5.538654e-05  -4.031650\nremiche=remiche_moy  1.428571   0.78125  8.641975 5.396493e-05  -4.037756\nsoldevu=n1           6.172840   7.81250 20.000000 5.350771e-05  -4.039752\nprelfin=prelfin_moy  0.000000   0.00000  6.913580 4.503884e-05  -4.079984\nversesp=versesp_oui  1.149425   0.78125 10.740741 2.559039e-06  -4.703369\neparliv=eparliv_nul 11.897106  57.81250 76.790123 1.662908e-07  -5.233544\nporttit=porttit_nul  7.619048  37.50000 77.777778 8.902559e-28 -10.923473\n\n$`3`\n                        Cla/Mod    Mod/Cla    Global      p.value    v.test\nremiche=remiche_moy   62.857143 26.6666667  8.641975 3.453146e-16  8.156345\nversesp=versesp_oui   56.321839 29.6969697 10.740741 2.979388e-15  7.891766\nsoldevu=p3            56.521739 23.6363636  8.518519 3.896798e-12  6.940875\nvirecre=virecre_fai   37.931034 40.0000000 21.481481 8.361031e-10  6.137917\ncableue=cableue_oui   33.744856 49.6969697 30.000000 2.203951e-09  5.982014\neparlog=eparlog_fai   54.545455 14.5454545  5.432099 2.897313e-07  5.130007\nremiche=remiche_fai   31.363636 41.8181818 27.160494 4.521463e-06  4.585849\nprelfin=prelfin_moy   46.428571 15.7575758  6.913580 5.628465e-06  4.539886\noppo=oppo_oui         44.827586 15.7575758  7.160494 1.293146e-05  4.361262\nviredeb=viredeb_fai   29.918033 44.2424242 30.123457 1.627946e-05  4.310624\ninterdit=interdit_non 21.808511 99.3939394 92.839506 1.925733e-05  4.273332\nsoldevu=p2            31.724138 27.8787879 17.901235 3.400218e-04  3.582730\nvirecre=virecre_moy   33.333333 23.0303030 14.074074 4.406124e-04  3.514482\neparlog=eparlog_for   37.500000 14.5454545  7.901235 9.876784e-04  3.294013\neparliv=eparliv_fai   30.555556 26.6666667 17.777778 1.315757e-03  3.212521\ncsp=ouvri             27.322404 30.3030303 22.592593 9.747159e-03  2.584672\nduree=d48             26.570048 33.3333333 25.555556 1.206706e-02  2.510177\ncredhab=credhab_non   21.448468 93.3333333 88.641975 2.788478e-02  2.198904\ncsp=etudi             31.578947 10.9090909  7.037037 3.841126e-02  2.070439\nporttit=porttit_nul   21.904762 83.6363636 77.777778 3.953318e-02  2.058594\nvirecre=virecre_for   13.559322  9.6969697 14.567901 4.210466e-02 -2.032484\ncredhab=credhab_oui   11.956522  6.6666667 11.358025 2.788478e-02 -2.198904\nsoldevu=n2            10.294118  4.2424242  8.395062 2.451975e-02 -2.248886\nviredeb=viredeb_nul   17.731959 52.1212121 59.876543 2.396225e-02 -2.257734\nremiche=remiche_for    9.859155  4.2424242  8.765432 1.574306e-02 -2.414818\ncsp=cadsu             11.650485  7.2727273 12.716049 1.467307e-02 -2.440349\nprelfin=prelfin_nul   18.953324 81.2121212 87.283951 1.191621e-02 -2.514616\nretresp=retresp_for    3.030303  0.6060606  4.074074 4.983258e-03 -2.808114\nage=ai75              12.359551 13.3333333 21.975309 1.904111e-03 -3.104795\nsoldevu=p1            14.022140 23.0303030 33.456790 1.207521e-03 -3.237098\nporttit=porttit_for    4.000000  1.2121212  6.172840 9.266943e-04 -3.311886\nduree=dm2              7.692308  4.2424242 11.234568 5.979714e-04 -3.432533\neparliv=eparliv_for    2.272727  0.6060606  5.432099 4.571120e-04 -3.504706\nsoldevu=p4             7.368421  4.2424242 11.728395 2.933588e-04 -3.621095\nviredeb=viredeb_for    0.000000  0.0000000  4.938272 8.548915e-05 -3.928467\ninterdit=interdit_oui  1.724138  0.6060606  7.160494 1.925733e-05 -4.273332\noppo=oppo_non         18.484043 84.2424242 92.839506 1.293146e-05 -4.361262\ncableue=cableue_non   14.638448 50.3030303 70.000000 2.203951e-09 -5.982014\neparlog=eparlog_nul   16.666667 70.9090909 86.666667 8.491114e-10 -6.135464\nvirecre=virecre_nul   11.138614 27.2727273 49.876543 4.753084e-11 -6.578472\nversesp=versesp_non   16.044260 70.3030303 89.259259 2.979388e-15 -7.891766\nremiche=remiche_nul   10.022272 27.2727273 55.432099 2.840351e-16 -8.179919\n\n$`4`\n                      Cla/Mod   Mod/Cla    Global      p.value    v.test\nprelfin=prelfin_fai 78.723404 43.023256  5.802469 6.201311e-31 11.564970\nviredeb=viredeb_for 60.000000 27.906977  4.938272 3.178013e-15  7.883710\ncredcon=credcon_fai 44.117647 34.883721  8.395062 3.906542e-14  7.564068\npreltre=preltre_fai 48.936170 26.744186  5.802469 5.378302e-12  6.895216\nremiche=remiche_for 35.211268 29.069767  8.765432 3.968544e-09  5.885499\nduree=d812          22.222222 37.209302 17.777778 5.276832e-06  4.553470\neparliv=eparliv_fai 20.833333 34.883721 17.777778 5.339971e-05  4.040226\nviredeb=viredeb_fai 17.213115 48.837209 30.123457 1.222604e-04  3.841549\nsoldevu=p2          20.000000 33.720930 17.901235 1.795503e-04  3.746177\nvirecre=virecre_moy 21.052632 27.906977 14.074074 3.659685e-04  3.563481\ncableue=cableue_oui 16.460905 46.511628 30.000000 6.652023e-04  3.403534\nage=ai55            17.816092 36.046512 21.481481 1.027647e-03  3.282846\nvirecre=virecre_for 19.491525 26.744186 14.567901 1.757335e-03  3.128446\ncsp=emplo           17.218543 30.232558 18.641975 5.829993e-03  2.757193\nversesp=versesp_oui 19.540230 19.767442 10.740741 8.535187e-03  2.630131\nassurvi=assurvi_oui 16.911765 26.744186 16.790123 1.354096e-02  2.469216\noppo=oppo_oui       20.689655 13.953488  7.160494 1.893063e-02  2.346894\noppo=oppo_non        9.840426 86.046512 92.839506 1.893063e-02 -2.346894\nassurvi=assurvi_non  9.347181 73.255814 83.209877 1.354096e-02 -2.469216\nage=ai75             5.617978 11.627907 21.975309 1.054200e-02 -2.557525\nage=ai25             3.333333  3.488372 11.111111 9.791031e-03 -2.583123\nversesp=versesp_non  9.543568 80.232558 89.259259 8.535187e-03 -2.630131\nsoldevu=p1           5.904059 18.604651 33.456790 1.432833e-03 -3.187954\ncableue=cableue_non  8.112875 53.488372 70.000000 6.652023e-04 -3.403534\nduree=d24            3.030303  4.651163 16.296296 6.587016e-04 -3.406216\nremiche=remiche_nul  7.126949 37.209302 55.432099 3.604595e-04 -3.567459\neparliv=eparliv_nul  8.360129 60.465116 76.790123 3.398095e-04 -3.582893\nduree=dm2            0.000000  0.000000 11.234568 1.908395e-05 -4.275347\npreltre=preltre_nul  8.516484 72.093023 89.876543 6.024486e-07 -4.990431\nvirecre=virecre_nul  3.960396 18.604651 49.876543 3.016853e-10 -6.297910\ncredcon=credcon_nul  6.861314 54.651163 84.567901 1.473736e-12 -7.076939\nviredeb=viredeb_nul  3.505155 19.767442 59.876543 1.229623e-15 -8.001450\nprelfin=prelfin_nul  6.223479 51.162791 87.283951 7.370840e-19 -8.869147\n\n$`5`\n                        Cla/Mod    Mod/Cla    Global      p.value    v.test\nvirecre=virecre_for   51.694915  66.304348 14.567901 1.188351e-35 12.462987\nviredeb=viredeb_moy   73.170732  32.608696  5.061728 5.088499e-22  9.646454\npreltre=preltre_moy   71.428571  27.173913  4.320988 7.737954e-18  8.603414\nduree=dp12            22.881356  58.695652 29.135802 3.498511e-10  6.274904\nassurvi=assurvi_oui   28.676471  42.391304 16.790123 4.726270e-10  6.227934\ncredhab=credhab_oui   33.695652  33.695652 11.358025 7.147992e-10  6.162777\ncableue=cableue_oui   22.222222  58.695652 30.000000 1.319307e-09  6.065028\nretresp=retresp_moy   35.526316  29.347826  9.382716 3.426330e-09  5.909747\nsoldevu=p4            30.526316  31.521739 11.728395 4.629830e-08  5.464971\neparliv=eparliv_fai   25.694444  40.217391 17.777778 5.987183e-08  5.419184\nsexe=hom              14.695341  89.130435 68.888889 1.786500e-06  4.776187\nprelfin=prelfin_moy   32.142857  19.565217  6.913580 1.443831e-05  4.337088\ncredcon=credcon_for   31.578947  19.565217  7.037037 1.926314e-05  4.273265\ninterdit=interdit_non 12.234043 100.000000 92.839506 6.973648e-04  3.390613\nremiche=remiche_fai   17.727273  42.391304 27.160494 8.220234e-04  3.345271\nviredeb=viredeb_for   27.500000  11.956522  4.938272 4.002918e-03  2.877932\nviredeb=viredeb_fai   15.983607  42.391304 30.123457 8.165531e-03  2.645148\nsoldevu=p3            21.739130  16.304348  8.518519 9.513216e-03  2.593038\nage=ai75              16.853933  32.608696 21.975309 1.215314e-02  2.507666\neparlog=eparlog_fai   22.727273  10.869565  5.432099 2.725355e-02  2.207867\ncsp=inter             17.647059  19.565217 12.592593 4.256582e-02  2.027945\nporttit=porttit_moy   19.672131  13.043478  7.530864 4.815325e-02  1.976013\nprelfin=prelfin_nul   10.183876  78.260870 87.283951 1.006246e-02 -2.573676\neparlog=eparlog_nul   10.113960  77.173913 86.666667 7.944432e-03 -2.654422\ncsp=etudi              1.754386   1.086957  7.037037 7.881860e-03 -2.657089\nsoldevu=n1             5.555556   9.782609 20.000000 6.171965e-03 -2.738503\neparliv=eparliv_for    0.000000   0.000000  5.432099 4.251639e-03 -2.858862\nduree=d24              3.787879   5.434783 16.296296 1.106869e-03 -3.261852\nduree=dm2              2.197802   2.173913 11.234568 9.812144e-04 -3.295858\ncredcon=credcon_nul    9.635036  71.739130 84.567901 8.053852e-04 -3.350937\ninterdit=interdit_oui  0.000000   0.000000  7.160494 6.973648e-04 -3.390613\nvirecre=virecre_fai    4.597701   8.695652 21.481481 6.876957e-04 -3.394438\nage=ai25               1.111111   1.086957 11.111111 1.477536e-04 -3.794815\neparliv=eparliv_nul    8.842444  59.782609 76.790123 1.075662e-04 -3.872859\nremiche=remiche_nul    6.904232  33.695652 55.432099 9.434755e-06 -4.429738\nsexe=fem               3.968254  10.869565 31.111111 1.786500e-06 -4.776187\nsoldevu=p1             4.059041  11.956522 33.456790 7.352546e-07 -4.951812\nretresp=retresp_fai    8.559201  65.217391 86.543210 2.036605e-08 -5.608863\ncableue=cableue_non    6.701940  41.304348 70.000000 1.319307e-09 -6.065028\ncredhab=credhab_non    8.495822  66.304348 88.641975 7.147992e-10 -6.162777\nassurvi=assurvi_non    7.863501  57.608696 83.209877 4.726270e-10 -6.227934\npreltre=preltre_nul    8.241758  65.217391 89.876543 2.892686e-12 -6.982842\nvirecre=virecre_nul    2.970297  13.043478 49.876543 4.792673e-15 -7.832236\nviredeb=viredeb_nul    2.474227  13.043478 59.876543 7.633000e-23 -9.839181\n\n\nLa partition en cinq classes vient préciser la classe 3 en la décomposant en trois classes (20%, 11% et 11% de la clientèle totale).\n\nLa nouvelle classe 3 correspond à des gens qui font des chèques… Visiblement plutôt des ouvriers.\nLa classe 4 correspond à des clients qui ont des déductions fiscales/financières, plutôt des ouvriers.\nLa classe 5 correspond à des clients qui font des virements, plutôt les professions intermédiaires, et les plus âgés (on est un peu surpris).\n\nCes trois classes viennent préciser la nature des mouvements financiers sur le compte courant des clients ! Il faut préciser chacun de ces segments de clientèle pour pouvoir les nommer…"
  }
]